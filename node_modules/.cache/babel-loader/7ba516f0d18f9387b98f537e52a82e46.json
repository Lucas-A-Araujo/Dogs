{"ast":null,"code":"import _isPlainObject from \"lodash/isPlainObject\";\nimport _values from \"lodash/values\";\nimport _uniqBy from \"lodash/uniqBy\";\nimport _groupBy from \"lodash/groupBy\";\nimport _some from \"lodash/some\";\nimport _uniq from \"lodash/uniq\";\nimport _isFunction from \"lodash/isFunction\";\nimport _flatten from \"lodash/flatten\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nimport React from \"react\";\nimport Axis from \"./axis\";\nimport Style from \"./style\";\nimport Transitions from \"./transitions\";\nimport Data from \"./data\";\nimport Domain from \"./domain\";\nimport Events from \"./events\";\nimport Collection from \"./collection\";\nimport Helpers from \"./helpers\";\nimport Scale from \"./scale\";\nimport Log from \"./log\";\nexport default {\n  getData: function (props, childComponents) {\n    if (props.data) {\n      return Data.getData(props);\n    }\n\n    childComponents = childComponents || React.Children.toArray(props.children);\n    return this.getDataFromChildren(childComponents);\n  },\n  getDefaultDomainPadding: function (props, axis, childComponents) {\n    if (props.polar || axis !== \"x\") {\n      return undefined;\n    }\n\n    var groupComponent = childComponents.filter(function (child) {\n      return child.type && child.type.role && child.type.role === \"group\";\n    });\n\n    if (groupComponent.length < 1) {\n      return undefined;\n    }\n\n    var _groupComponent$0$pro = groupComponent[0].props,\n        offset = _groupComponent$0$pro.offset,\n        children = _groupComponent$0$pro.children;\n    return {\n      x: offset * children.length / 2\n    };\n  },\n  getDomain: function (props, axis, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var propsDomain = Domain.getDomainFromProps(props, axis);\n    var domainPadding = this.getDefaultDomainPadding(props, axis, childComponents);\n    var domain;\n\n    if (propsDomain) {\n      domain = propsDomain;\n    } else {\n      var minDomain = Domain.getMinFromProps(props, axis);\n      var maxDomain = Domain.getMaxFromProps(props, axis);\n      var dataset = (props.data || props.y) && Data.getData(props);\n      var dataDomain = dataset ? Domain.getDomainFromData(props, axis, dataset) : [];\n      var childDomain = this.getDomainFromChildren(props, axis, childComponents);\n      var min = minDomain || Collection.getMinValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      var max = maxDomain || Collection.getMaxValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      domain = Domain.getDomainFromMinMax(min, max);\n    }\n\n    return Domain.formatDomain(domain, _assign({\n      domainPadding: domainPadding\n    }, props), axis);\n  },\n  getScale: function (props, axis, childComponents) {\n    if (props.data) {\n      return Scale.getBaseScale(props, axis);\n    }\n\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, {\n        horizontal: props.horizontal\n      });\n\n      return Scale.getScaleType(sharedProps, axis);\n    };\n\n    var childScale = _uniq(Helpers.reduceChildren(children, iteratee, props)); // default to linear scale if more than one uniq scale type is given by children\n\n\n    return childScale.length > 1 ? Scale.getScaleFromName(\"linear\") : Scale.getScaleFromName(childScale[0]);\n  },\n  setAnimationState: function (props, nextProps) {\n    if (!props.animate) {\n      return;\n    }\n\n    if (props.animate.parentState) {\n      var nodesWillExit = props.animate.parentState.nodesWillExit;\n      var oldProps = nodesWillExit ? props : null;\n      this.setState(_defaults({\n        oldProps: oldProps,\n        nextProps: nextProps\n      }, props.animate.parentState));\n    } else {\n      var oldChildren = React.Children.toArray(props.children);\n      var nextChildren = React.Children.toArray(nextProps.children);\n\n      var isContinuous = function (child) {\n        var check = function (c) {\n          return c.type && c.type.continuous;\n        };\n\n        return Array.isArray(child) ? _some(child, check) : check(child);\n      };\n\n      var continuous = !props.polar && _some(oldChildren, function (child) {\n        return isContinuous(child) || child.props.children && isContinuous(child.props.children);\n      });\n\n      var _Transitions$getIniti = Transitions.getInitialTransitionState(oldChildren, nextChildren),\n          _nodesWillExit = _Transitions$getIniti.nodesWillExit,\n          nodesWillEnter = _Transitions$getIniti.nodesWillEnter,\n          childrenTransitions = _Transitions$getIniti.childrenTransitions,\n          nodesShouldEnter = _Transitions$getIniti.nodesShouldEnter;\n\n      this.setState({\n        nodesWillExit: _nodesWillExit,\n        nodesWillEnter: nodesWillEnter,\n        nodesShouldEnter: nodesShouldEnter,\n        childrenTransitions: Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[0] : childrenTransitions,\n        oldProps: _nodesWillExit ? props : null,\n        nextProps: nextProps,\n        continuous: continuous\n      });\n    }\n  },\n  getAllEvents: function (props) {\n    var components = [\"groupComponent\", \"containerComponent\", \"labelComponent\"];\n    this.componentEvents = Events.getComponentEvents(props, components);\n    var events = props.events;\n\n    if (Array.isArray(this.componentEvents)) {\n      var _componentEvents;\n\n      events = Array.isArray(props.events) ? (_componentEvents = this.componentEvents).concat.apply(_componentEvents, _toConsumableArray(props.events)) : this.componentEvents;\n    }\n\n    return events || [];\n  },\n  getAnimationProps: function (props, child, index) {\n    var _this = this;\n\n    if (!props.animate) {\n      return child.props.animate;\n    }\n\n    var getFilteredState = function () {\n      var childrenTransitions = _this.state && _this.state.childrenTransitions;\n      childrenTransitions = Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[index] : childrenTransitions;\n      return _defaults({\n        childrenTransitions: childrenTransitions\n      }, _this.state);\n    };\n\n    var getTransitions = props.animate && props.animate.getTransitions;\n    var state = getFilteredState();\n    var parentState = props.animate && props.animate.parentState || state;\n\n    if (!getTransitions) {\n      var getTransitionProps = Transitions.getTransitionPropsFactory(props, state, function (newState) {\n        return _this.setState(newState);\n      });\n\n      getTransitions = function (childComponent) {\n        return getTransitionProps(childComponent, index);\n      };\n    }\n\n    return _defaults({\n      getTransitions: getTransitions,\n      parentState: parentState\n    }, props.animate, child.props.animate);\n  },\n  getDomainFromChildren: function (props, axis, childComponents) {\n    // eslint-disable-line max-statements, complexity, max-len\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    var parentData = props.data ? Data.getData(props, axis) : undefined;\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain,\n        horizontal = props.horizontal;\n    var baseParentProps = {\n      horizontal: horizontal,\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      minDomain: minDomain,\n      maxDomain: maxDomain,\n      categories: categories\n    };\n    var parentProps = parentData ? _assign(baseParentProps, {\n      data: parentData\n    }) : baseParentProps;\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, parentProps);\n\n      if (!Domain.isDomainComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getDomain)) {\n        return child.props && child.type.getDomain(sharedProps, axis);\n      } else {\n        return Domain.getDomain(sharedProps, axis);\n      }\n    };\n\n    var childDomains = Helpers.reduceChildren(children, iteratee, props);\n    var min = childDomains.length === 0 ? 0 : Collection.getMinValue(childDomains);\n    var max = childDomains.length === 0 ? 1 : Collection.getMaxValue(childDomains);\n    return [min, max];\n  },\n  addBinsToParentPropsIfHistogram: function (_ref) {\n    var children = _ref.children,\n        props = _ref.props,\n        childComponents = _ref.childComponents,\n        parentProps = _ref.parentProps;\n    var someChildrenAreHistograms = children.some(function (child) {\n      return child.type && child.type.role === \"histogram\";\n    });\n    var allChildrenAreHistograms = someChildrenAreHistograms && children.length && children.every(function (child) {\n      return child.type && child.type.role === \"histogram\";\n    });\n\n    if (someChildrenAreHistograms && !allChildrenAreHistograms) {\n      Log.warn(\"VictoryHistogram only supports being stacked with other VictoryHistogram components. Check to make sure that you are only passing VictoryHistogram components to VictoryStack\");\n    } // if we are stacking histograms, we need to generate explicit bins\n    // or else each histogram may end up having different bins\n\n\n    if (!allChildrenAreHistograms) {\n      return parentProps;\n    }\n\n    var childBins = props.bins || childComponents[0].props.bins; // if we have explicit bins then we don't need to calculate them\n\n    if (!Array.isArray(childBins)) {\n      var combinedData = children.reduce(function (memo, child) {\n        var xAccessor = Helpers.createAccessor(child.props.x || \"x\");\n        return memo.concat(child.props.data.map(function (datum) {\n          return {\n            x: xAccessor(datum)\n          };\n        }));\n      }, []); // use the same function to generate bins as VictoryHistogram but with\n      // the combined data from above, then get explicit bins from that\n\n      var getFormattedHistogramData = children[0].type.getFormattedData;\n      childBins = getFormattedHistogramData({\n        data: combinedData,\n        bins: childBins\n      }).reduce(function (memo, _ref2, index) {\n        var x0 = _ref2.x0,\n            x1 = _ref2.x1;\n        return index === 0 ? memo.concat([x0, x1]) : memo.concat(x1);\n      }, []);\n    }\n\n    return _objectSpread({}, parentProps, {\n      bins: childBins\n    });\n  },\n  getDataFromChildren: function (props, childComponents) {\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain;\n    var parentProps = {\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      categories: categories,\n      minDomain: minDomain,\n      maxDomain: maxDomain\n    };\n    var stack = 0;\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    parentProps = this.addBinsToParentPropsIfHistogram({\n      children: children,\n      props: props,\n      childComponents: childComponents,\n      parentProps: parentProps\n    });\n\n    var iteratee = function (child, childName, parent) {\n      var childProps = _assign({}, child.props, parentProps);\n\n      var childData;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        child = parent ? React.cloneElement(child, parent.props) : child;\n        childData = child.type.getData(childProps);\n      } else {\n        childData = Data.getData(childProps);\n      }\n\n      stack += 1;\n      return childData.map(function (datum, index) {\n        return _assign({\n          _stack: stack,\n          _group: index\n        }, datum);\n      });\n    };\n\n    var stacked = children.filter(function (c) {\n      return c.type && c.type.role === \"stack\";\n    }).length;\n\n    var combine = function (memo, val) {\n      return memo.concat(_uniqBy(val, \"_group\"));\n    };\n\n    var datasets = Helpers.reduceChildren(children, iteratee, props, [], combine);\n    var group = stacked ? \"_group\" : \"_stack\";\n    return _values(_groupBy(datasets, group));\n  },\n  getColor: function (calculatedProps, child, index) {\n    // check for styles first\n    var style = calculatedProps.style;\n    var colorScale = calculatedProps.colorScale,\n        color = calculatedProps.color;\n\n    if (style && style.data && style.data.fill) {\n      return style.data.fill;\n    }\n\n    colorScale = child.props && child.props.colorScale ? child.props.colorScale : colorScale;\n    color = child.props && child.props.color ? child.props.color : color;\n\n    if (!colorScale && !color) {\n      return undefined;\n    }\n\n    var colors = Array.isArray(colorScale) ? colorScale : Style.getColorScale(colorScale);\n    return color || colors[index % colors.length];\n  },\n  getWidth: function (props) {\n    var datasets = props.datasets,\n        scale = props.scale,\n        horizontal = props.horizontal;\n    var range = horizontal ? scale.y.range() : scale.x.range();\n    var extent = Math.abs(range[1] - range[0]);\n    var seriesLength = Array.isArray(datasets[0]) ? datasets[0].length : 1;\n    var bars = datasets.length * seriesLength + 2;\n    var barRatio = 0.5;\n    return {\n      width: Math.round(barRatio * extent / bars)\n    };\n  },\n  getStyle: function (theme, style, role) {\n    var defaultStyle = theme && theme[role] && theme[role].style ? theme[role].style : {};\n    return Helpers.getStyles(style, defaultStyle);\n  },\n  getChildStyle: function (child, index, calculatedProps) {\n    var style = calculatedProps.style,\n        role = calculatedProps.role;\n    var childStyle = child.props.style || {};\n\n    if (Array.isArray(childStyle)) {\n      return childStyle;\n    }\n\n    var childRole = child.type && child.type.role;\n    var defaultFill = childRole === \"stack\" ? undefined : this.getColor(calculatedProps, child, index);\n    var defaultColor = childRole === \"line\" ? {\n      fill: \"none\",\n      stroke: defaultFill\n    } : {\n      fill: defaultFill\n    };\n    var dataWidth = role === \"stack\" ? {} : this.getWidth(calculatedProps);\n\n    var dataStyle = _defaults({}, childStyle.data, _assign({}, dataWidth, style.data, defaultColor));\n\n    var labelsStyle = _defaults({}, childStyle.labels, style.labels);\n\n    return {\n      parent: style.parent,\n      data: dataStyle,\n      labels: labelsStyle\n    };\n  },\n  getStringsFromCategories: function (childComponents, axis) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n\n      if (!Domain.isDomainComponent(child) || !childProps.categories) {\n        return null;\n      } else {\n        var categories = childProps.categories && !Array.isArray(childProps.categories) ? childProps.categories[axis] : childProps.props.categories;\n        var categoryStrings = categories && categories.filter(function (val) {\n          return typeof val === \"string\";\n        });\n        return categoryStrings ? Collection.removeUndefined(categoryStrings) : [];\n      }\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee);\n  },\n  getStringsFromData: function (childComponents) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n      var data;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        data = child.type.getData(childProps);\n      } else {\n        data = Data.getData(childProps);\n      }\n\n      return data.map(function (d) {\n        return {\n          x: d.xName,\n          y: d.yName\n        };\n      });\n    };\n\n    var initialMemo = {\n      x: [],\n      y: []\n    };\n\n    var combine = function (memo, datum) {\n      var x = Array.isArray(datum) ? datum.map(function (d) {\n        return d.x;\n      }).filter(Boolean) : datum.x;\n      var y = Array.isArray(datum) ? datum.map(function (d) {\n        return d.y;\n      }).filter(Boolean) : datum.y;\n      return {\n        x: x !== undefined ? memo.x.concat(x) : memo.x,\n        y: y !== undefined ? memo.y.concat(y) : memo.y\n      };\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee, {}, initialMemo, combine);\n  },\n  getCategoryAndAxisStringsFromChildren: function (props, axis, childComponents) {\n    var categories = _isPlainObject(props.categories) ? props.categories[axis] : props.categories;\n    var axisComponent = Axis.getAxisComponent(childComponents, axis);\n    var axisStrings = axisComponent ? Data.getStringsFromAxes(axisComponent.props, axis) : [];\n    var categoryStrings = categories || this.getStringsFromCategories(childComponents, axis);\n    return _uniq(_flatten(_toConsumableArray(categoryStrings).concat(_toConsumableArray(axisStrings))));\n  },\n  getStringsFromChildren: function (props, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var xStrings = this.getCategoryAndAxisStringsFromChildren(props, \"x\", childComponents);\n    var yStrings = this.getCategoryAndAxisStringsFromChildren(props, \"y\", childComponents);\n    var dataStrings = this.getStringsFromData(childComponents);\n    return {\n      x: _uniq(_flatten(_toConsumableArray(xStrings).concat(_toConsumableArray(dataStrings.x)))),\n      y: _uniq(_flatten(_toConsumableArray(yStrings).concat(_toConsumableArray(dataStrings.y))))\n    };\n  },\n  getCategories: function (props, childComponents, allStrings) {\n    var xPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.x : props.categories;\n    var yPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.y : props.categories;\n    var fallbackRequired = !xPropCategories || !yPropCategories;\n    var fallbackProps = fallbackRequired ? allStrings || this.getStringsFromChildren(props, childComponents) : {};\n    var xCategories = xPropCategories || fallbackProps.x;\n    var yCategories = yPropCategories || fallbackProps.y;\n    return {\n      x: xCategories.length > 0 ? xCategories : undefined,\n      y: yCategories.length > 0 ? yCategories : undefined\n    };\n  }\n};","map":{"version":3,"sources":["/home/lucas/node_projects/dogs-final/node_modules/victory-core/es/victory-util/wrapper.js"],"names":["_isPlainObject","_values","_uniqBy","_groupBy","_some","_uniq","_isFunction","_flatten","_defaults","_assign","_objectSpread","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","prototype","toString","call","Array","from","isArray","arr2","React","Axis","Style","Transitions","Data","Domain","Events","Collection","Helpers","Scale","Log","getData","props","childComponents","data","Children","toArray","children","getDataFromChildren","getDefaultDomainPadding","axis","polar","undefined","groupComponent","child","type","role","_groupComponent$0$pro","offset","x","getDomain","propsDomain","getDomainFromProps","domainPadding","domain","minDomain","getMinFromProps","maxDomain","getMaxFromProps","dataset","y","dataDomain","getDomainFromData","childDomain","getDomainFromChildren","min","getMinValue","max","getMaxValue","getDomainFromMinMax","formatDomain","getScale","getBaseScale","slice","iteratee","sharedProps","horizontal","getScaleType","childScale","reduceChildren","getScaleFromName","setAnimationState","nextProps","animate","parentState","nodesWillExit","oldProps","setState","oldChildren","nextChildren","isContinuous","check","c","continuous","_Transitions$getIniti","getInitialTransitionState","_nodesWillExit","nodesWillEnter","childrenTransitions","nodesShouldEnter","isArrayOfArrays","getAllEvents","components","componentEvents","getComponentEvents","events","_componentEvents","apply","getAnimationProps","index","_this","getFilteredState","state","getTransitions","getTransitionProps","getTransitionPropsFactory","newState","childComponent","parentData","startAngle","endAngle","categories","baseParentProps","parentProps","isDomainComponent","childDomains","addBinsToParentPropsIfHistogram","_ref","someChildrenAreHistograms","some","allChildrenAreHistograms","every","warn","childBins","bins","combinedData","reduce","memo","xAccessor","createAccessor","map","datum","getFormattedHistogramData","getFormattedData","_ref2","x0","x1","stack","childName","parent","childProps","childData","isDataComponent","cloneElement","_stack","_group","stacked","combine","val","datasets","group","getColor","calculatedProps","style","colorScale","color","fill","colors","getColorScale","getWidth","scale","range","extent","Math","abs","seriesLength","bars","barRatio","width","round","getStyle","theme","defaultStyle","getStyles","getChildStyle","childStyle","childRole","defaultFill","defaultColor","stroke","dataWidth","dataStyle","labelsStyle","labels","getStringsFromCategories","categoryStrings","removeUndefined","getStringsFromData","d","xName","yName","initialMemo","Boolean","getCategoryAndAxisStringsFromChildren","axisComponent","getAxisComponent","axisStrings","getStringsFromAxes","getStringsFromChildren","xStrings","yStrings","dataStrings","getCategories","allStrings","xPropCategories","yPropCategories","fallbackRequired","fallbackProps","xCategories","yCategories"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,sBAA3B;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;;AAEA,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAT,IAAgB,IAAhB,GAAuBC,SAAS,CAACD,CAAD,CAAhC,GAAsC,EAAnD;AAAuD,QAAII,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYH,MAAZ,CAAd;;AAAmC,QAAI,OAAOE,MAAM,CAACE,qBAAd,KAAwC,UAA5C,EAAwD;AAAEH,MAAAA,OAAO,GAAGA,OAAO,CAACI,MAAR,CAAeH,MAAM,CAACE,qBAAP,CAA6BJ,MAA7B,EAAqCM,MAArC,CAA4C,UAAUC,GAAV,EAAe;AAAE,eAAOL,MAAM,CAACM,wBAAP,CAAgCR,MAAhC,EAAwCO,GAAxC,EAA6CE,UAApD;AAAiE,OAA9H,CAAf,CAAV;AAA4J;;AAACR,IAAAA,OAAO,CAACS,OAAR,CAAgB,UAAUC,GAAV,EAAe;AAAEC,MAAAA,eAAe,CAAChB,MAAD,EAASe,GAAT,EAAcX,MAAM,CAACW,GAAD,CAApB,CAAf;AAA4C,KAA7E;AAAiF;;AAAC,SAAOf,MAAP;AAAgB;;AAEje,SAASgB,eAAT,CAAyBC,GAAzB,EAA8BF,GAA9B,EAAmCG,KAAnC,EAA0C;AAAE,MAAIH,GAAG,IAAIE,GAAX,EAAgB;AAAEX,IAAAA,MAAM,CAACa,cAAP,CAAsBF,GAAtB,EAA2BF,GAA3B,EAAgC;AAAEG,MAAAA,KAAK,EAAEA,KAAT;AAAgBL,MAAAA,UAAU,EAAE,IAA5B;AAAkCO,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAEJ,IAAAA,GAAG,CAACF,GAAD,CAAH,GAAWG,KAAX;AAAmB;;AAAC,SAAOD,GAAP;AAAa;;AAEjN,SAASK,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,SAAOC,kBAAkB,CAACD,GAAD,CAAlB,IAA2BE,gBAAgB,CAACF,GAAD,CAA3C,IAAoDG,kBAAkB,EAA7E;AAAkF;;AAErH,SAASA,kBAAT,GAA8B;AAAE,QAAM,IAAIC,SAAJ,CAAc,iDAAd,CAAN;AAAyE;;AAEzG,SAASF,gBAAT,CAA0BG,IAA1B,EAAgC;AAAE,MAAIC,MAAM,CAACC,QAAP,IAAmBxB,MAAM,CAACsB,IAAD,CAAzB,IAAmCtB,MAAM,CAACyB,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BL,IAA/B,MAAyC,oBAAhF,EAAsG,OAAOM,KAAK,CAACC,IAAN,CAAWP,IAAX,CAAP;AAA0B;;AAElK,SAASJ,kBAAT,CAA4BD,GAA5B,EAAiC;AAAE,MAAIW,KAAK,CAACE,OAAN,CAAcb,GAAd,CAAJ,EAAwB;AAAE,SAAK,IAAItB,CAAC,GAAG,CAAR,EAAWoC,IAAI,GAAG,IAAIH,KAAJ,CAAUX,GAAG,CAACpB,MAAd,CAAvB,EAA8CF,CAAC,GAAGsB,GAAG,CAACpB,MAAtD,EAA8DF,CAAC,EAA/D,EAAmE;AAAEoC,MAAAA,IAAI,CAACpC,CAAD,CAAJ,GAAUsB,GAAG,CAACtB,CAAD,CAAb;AAAmB;;AAAC,WAAOoC,IAAP;AAAc;AAAE;;AAEtK,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,eAAe;AACbC,EAAAA,OAAO,EAAE,UAAUC,KAAV,EAAiBC,eAAjB,EAAkC;AACzC,QAAID,KAAK,CAACE,IAAV,EAAgB;AACd,aAAOV,IAAI,CAACO,OAAL,CAAaC,KAAb,CAAP;AACD;;AAEDC,IAAAA,eAAe,GAAGA,eAAe,IAAIb,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBJ,KAAK,CAACK,QAA7B,CAArC;AACA,WAAO,KAAKC,mBAAL,CAAyBL,eAAzB,CAAP;AACD,GARY;AASbM,EAAAA,uBAAuB,EAAE,UAAUP,KAAV,EAAiBQ,IAAjB,EAAuBP,eAAvB,EAAwC;AAC/D,QAAID,KAAK,CAACS,KAAN,IAAeD,IAAI,KAAK,GAA5B,EAAiC;AAC/B,aAAOE,SAAP;AACD;;AAED,QAAIC,cAAc,GAAGV,eAAe,CAACzC,MAAhB,CAAuB,UAAUoD,KAAV,EAAiB;AAC3D,aAAOA,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWC,IAAzB,IAAiCF,KAAK,CAACC,IAAN,CAAWC,IAAX,KAAoB,OAA5D;AACD,KAFoB,CAArB;;AAIA,QAAIH,cAAc,CAAC1D,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,aAAOyD,SAAP;AACD;;AAED,QAAIK,qBAAqB,GAAGJ,cAAc,CAAC,CAAD,CAAd,CAAkBX,KAA9C;AAAA,QACIgB,MAAM,GAAGD,qBAAqB,CAACC,MADnC;AAAA,QAEIX,QAAQ,GAAGU,qBAAqB,CAACV,QAFrC;AAGA,WAAO;AACLY,MAAAA,CAAC,EAAED,MAAM,GAAGX,QAAQ,CAACpD,MAAlB,GAA2B;AADzB,KAAP;AAGD,GA5BY;AA6BbiE,EAAAA,SAAS,EAAE,UAAUlB,KAAV,EAAiBQ,IAAjB,EAAuBP,eAAvB,EAAwC;AACjDA,IAAAA,eAAe,GAAGA,eAAe,IAAIb,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBJ,KAAK,CAACK,QAA7B,CAArC;AACA,QAAIc,WAAW,GAAG1B,MAAM,CAAC2B,kBAAP,CAA0BpB,KAA1B,EAAiCQ,IAAjC,CAAlB;AACA,QAAIa,aAAa,GAAG,KAAKd,uBAAL,CAA6BP,KAA7B,EAAoCQ,IAApC,EAA0CP,eAA1C,CAApB;AACA,QAAIqB,MAAJ;;AAEA,QAAIH,WAAJ,EAAiB;AACfG,MAAAA,MAAM,GAAGH,WAAT;AACD,KAFD,MAEO;AACL,UAAII,SAAS,GAAG9B,MAAM,CAAC+B,eAAP,CAAuBxB,KAAvB,EAA8BQ,IAA9B,CAAhB;AACA,UAAIiB,SAAS,GAAGhC,MAAM,CAACiC,eAAP,CAAuB1B,KAAvB,EAA8BQ,IAA9B,CAAhB;AACA,UAAImB,OAAO,GAAG,CAAC3B,KAAK,CAACE,IAAN,IAAcF,KAAK,CAAC4B,CAArB,KAA2BpC,IAAI,CAACO,OAAL,CAAaC,KAAb,CAAzC;AACA,UAAI6B,UAAU,GAAGF,OAAO,GAAGlC,MAAM,CAACqC,iBAAP,CAAyB9B,KAAzB,EAAgCQ,IAAhC,EAAsCmB,OAAtC,CAAH,GAAoD,EAA5E;AACA,UAAII,WAAW,GAAG,KAAKC,qBAAL,CAA2BhC,KAA3B,EAAkCQ,IAAlC,EAAwCP,eAAxC,CAAlB;AACA,UAAIgC,GAAG,GAAGV,SAAS,IAAI5B,UAAU,CAACuC,WAAX,CAAuB9D,kBAAkB,CAACyD,UAAD,CAAlB,CAA+BtE,MAA/B,CAAsCa,kBAAkB,CAAC2D,WAAD,CAAxD,CAAvB,CAAvB;AACA,UAAII,GAAG,GAAGV,SAAS,IAAI9B,UAAU,CAACyC,WAAX,CAAuBhE,kBAAkB,CAACyD,UAAD,CAAlB,CAA+BtE,MAA/B,CAAsCa,kBAAkB,CAAC2D,WAAD,CAAxD,CAAvB,CAAvB;AACAT,MAAAA,MAAM,GAAG7B,MAAM,CAAC4C,mBAAP,CAA2BJ,GAA3B,EAAgCE,GAAhC,CAAT;AACD;;AAED,WAAO1C,MAAM,CAAC6C,YAAP,CAAoBhB,MAApB,EAA4B1E,OAAO,CAAC;AACzCyE,MAAAA,aAAa,EAAEA;AAD0B,KAAD,EAEvCrB,KAFuC,CAAnC,EAEIQ,IAFJ,CAAP;AAGD,GAnDY;AAoDb+B,EAAAA,QAAQ,EAAE,UAAUvC,KAAV,EAAiBQ,IAAjB,EAAuBP,eAAvB,EAAwC;AAChD,QAAID,KAAK,CAACE,IAAV,EAAgB;AACd,aAAOL,KAAK,CAAC2C,YAAN,CAAmBxC,KAAnB,EAA0BQ,IAA1B,CAAP;AACD;;AAED,QAAIH,QAAQ,GAAGJ,eAAe,GAAGA,eAAe,CAACwC,KAAhB,CAAsB,CAAtB,CAAH,GAA8BrD,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBJ,KAAK,CAACK,QAA7B,CAA5D;;AAEA,QAAIqC,QAAQ,GAAG,UAAU9B,KAAV,EAAiB;AAC9B,UAAI+B,WAAW,GAAG/F,OAAO,CAAC,EAAD,EAAKgE,KAAK,CAACZ,KAAX,EAAkB;AACzC4C,QAAAA,UAAU,EAAE5C,KAAK,CAAC4C;AADuB,OAAlB,CAAzB;;AAIA,aAAO/C,KAAK,CAACgD,YAAN,CAAmBF,WAAnB,EAAgCnC,IAAhC,CAAP;AACD,KAND;;AAQA,QAAIsC,UAAU,GAAGtG,KAAK,CAACoD,OAAO,CAACmD,cAAR,CAAuB1C,QAAvB,EAAiCqC,QAAjC,EAA2C1C,KAA3C,CAAD,CAAtB,CAfgD,CAe2B;;;AAG3E,WAAO8C,UAAU,CAAC7F,MAAX,GAAoB,CAApB,GAAwB4C,KAAK,CAACmD,gBAAN,CAAuB,QAAvB,CAAxB,GAA2DnD,KAAK,CAACmD,gBAAN,CAAuBF,UAAU,CAAC,CAAD,CAAjC,CAAlE;AACD,GAvEY;AAwEbG,EAAAA,iBAAiB,EAAE,UAAUjD,KAAV,EAAiBkD,SAAjB,EAA4B;AAC7C,QAAI,CAAClD,KAAK,CAACmD,OAAX,EAAoB;AAClB;AACD;;AAED,QAAInD,KAAK,CAACmD,OAAN,CAAcC,WAAlB,EAA+B;AAC7B,UAAIC,aAAa,GAAGrD,KAAK,CAACmD,OAAN,CAAcC,WAAd,CAA0BC,aAA9C;AACA,UAAIC,QAAQ,GAAGD,aAAa,GAAGrD,KAAH,GAAW,IAAvC;AACA,WAAKuD,QAAL,CAAc5G,SAAS,CAAC;AACtB2G,QAAAA,QAAQ,EAAEA,QADY;AAEtBJ,QAAAA,SAAS,EAAEA;AAFW,OAAD,EAGpBlD,KAAK,CAACmD,OAAN,CAAcC,WAHM,CAAvB;AAID,KAPD,MAOO;AACL,UAAII,WAAW,GAAGpE,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBJ,KAAK,CAACK,QAA7B,CAAlB;AACA,UAAIoD,YAAY,GAAGrE,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuB8C,SAAS,CAAC7C,QAAjC,CAAnB;;AAEA,UAAIqD,YAAY,GAAG,UAAU9C,KAAV,EAAiB;AAClC,YAAI+C,KAAK,GAAG,UAAUC,CAAV,EAAa;AACvB,iBAAOA,CAAC,CAAC/C,IAAF,IAAU+C,CAAC,CAAC/C,IAAF,CAAOgD,UAAxB;AACD,SAFD;;AAIA,eAAO7E,KAAK,CAACE,OAAN,CAAc0B,KAAd,IAAuBrE,KAAK,CAACqE,KAAD,EAAQ+C,KAAR,CAA5B,GAA6CA,KAAK,CAAC/C,KAAD,CAAzD;AACD,OAND;;AAQA,UAAIiD,UAAU,GAAG,CAAC7D,KAAK,CAACS,KAAP,IAAgBlE,KAAK,CAACiH,WAAD,EAAc,UAAU5C,KAAV,EAAiB;AACnE,eAAO8C,YAAY,CAAC9C,KAAD,CAAZ,IAAuBA,KAAK,CAACZ,KAAN,CAAYK,QAAZ,IAAwBqD,YAAY,CAAC9C,KAAK,CAACZ,KAAN,CAAYK,QAAb,CAAlE;AACD,OAFqC,CAAtC;;AAIA,UAAIyD,qBAAqB,GAAGvE,WAAW,CAACwE,yBAAZ,CAAsCP,WAAtC,EAAmDC,YAAnD,CAA5B;AAAA,UACIO,cAAc,GAAGF,qBAAqB,CAACT,aAD3C;AAAA,UAEIY,cAAc,GAAGH,qBAAqB,CAACG,cAF3C;AAAA,UAGIC,mBAAmB,GAAGJ,qBAAqB,CAACI,mBAHhD;AAAA,UAIIC,gBAAgB,GAAGL,qBAAqB,CAACK,gBAJ7C;;AAMA,WAAKZ,QAAL,CAAc;AACZF,QAAAA,aAAa,EAAEW,cADH;AAEZC,QAAAA,cAAc,EAAEA,cAFJ;AAGZE,QAAAA,gBAAgB,EAAEA,gBAHN;AAIZD,QAAAA,mBAAmB,EAAEvE,UAAU,CAACyE,eAAX,CAA2BF,mBAA3B,IAAkDA,mBAAmB,CAAC,CAAD,CAArE,GAA2EA,mBAJpF;AAKZZ,QAAAA,QAAQ,EAAEU,cAAc,GAAGhE,KAAH,GAAW,IALvB;AAMZkD,QAAAA,SAAS,EAAEA,SANC;AAOZW,QAAAA,UAAU,EAAEA;AAPA,OAAd;AASD;AACF,GApHY;AAqHbQ,EAAAA,YAAY,EAAE,UAAUrE,KAAV,EAAiB;AAC7B,QAAIsE,UAAU,GAAG,CAAC,gBAAD,EAAmB,oBAAnB,EAAyC,gBAAzC,CAAjB;AACA,SAAKC,eAAL,GAAuB7E,MAAM,CAAC8E,kBAAP,CAA0BxE,KAA1B,EAAiCsE,UAAjC,CAAvB;AACA,QAAIG,MAAM,GAAGzE,KAAK,CAACyE,MAAnB;;AAEA,QAAIzF,KAAK,CAACE,OAAN,CAAc,KAAKqF,eAAnB,CAAJ,EAAyC;AACvC,UAAIG,gBAAJ;;AAEAD,MAAAA,MAAM,GAAGzF,KAAK,CAACE,OAAN,CAAcc,KAAK,CAACyE,MAApB,IAA8B,CAACC,gBAAgB,GAAG,KAAKH,eAAzB,EAA0ChH,MAA1C,CAAiDoH,KAAjD,CAAuDD,gBAAvD,EAAyEtG,kBAAkB,CAAC4B,KAAK,CAACyE,MAAP,CAA3F,CAA9B,GAA2I,KAAKF,eAAzJ;AACD;;AAED,WAAOE,MAAM,IAAI,EAAjB;AACD,GAjIY;AAkIbG,EAAAA,iBAAiB,EAAE,UAAU5E,KAAV,EAAiBY,KAAjB,EAAwBiE,KAAxB,EAA+B;AAChD,QAAIC,KAAK,GAAG,IAAZ;;AAEA,QAAI,CAAC9E,KAAK,CAACmD,OAAX,EAAoB;AAClB,aAAOvC,KAAK,CAACZ,KAAN,CAAYmD,OAAnB;AACD;;AAED,QAAI4B,gBAAgB,GAAG,YAAY;AACjC,UAAIb,mBAAmB,GAAGY,KAAK,CAACE,KAAN,IAAeF,KAAK,CAACE,KAAN,CAAYd,mBAArD;AACAA,MAAAA,mBAAmB,GAAGvE,UAAU,CAACyE,eAAX,CAA2BF,mBAA3B,IAAkDA,mBAAmB,CAACW,KAAD,CAArE,GAA+EX,mBAArG;AACA,aAAOvH,SAAS,CAAC;AACfuH,QAAAA,mBAAmB,EAAEA;AADN,OAAD,EAEbY,KAAK,CAACE,KAFO,CAAhB;AAGD,KAND;;AAQA,QAAIC,cAAc,GAAGjF,KAAK,CAACmD,OAAN,IAAiBnD,KAAK,CAACmD,OAAN,CAAc8B,cAApD;AACA,QAAID,KAAK,GAAGD,gBAAgB,EAA5B;AACA,QAAI3B,WAAW,GAAGpD,KAAK,CAACmD,OAAN,IAAiBnD,KAAK,CAACmD,OAAN,CAAcC,WAA/B,IAA8C4B,KAAhE;;AAEA,QAAI,CAACC,cAAL,EAAqB;AACnB,UAAIC,kBAAkB,GAAG3F,WAAW,CAAC4F,yBAAZ,CAAsCnF,KAAtC,EAA6CgF,KAA7C,EAAoD,UAAUI,QAAV,EAAoB;AAC/F,eAAON,KAAK,CAACvB,QAAN,CAAe6B,QAAf,CAAP;AACD,OAFwB,CAAzB;;AAIAH,MAAAA,cAAc,GAAG,UAAUI,cAAV,EAA0B;AACzC,eAAOH,kBAAkB,CAACG,cAAD,EAAiBR,KAAjB,CAAzB;AACD,OAFD;AAGD;;AAED,WAAOlI,SAAS,CAAC;AACfsI,MAAAA,cAAc,EAAEA,cADD;AAEf7B,MAAAA,WAAW,EAAEA;AAFE,KAAD,EAGbpD,KAAK,CAACmD,OAHO,EAGEvC,KAAK,CAACZ,KAAN,CAAYmD,OAHd,CAAhB;AAID,GAnKY;AAoKbnB,EAAAA,qBAAqB,EAAE,UAAUhC,KAAV,EAAiBQ,IAAjB,EAAuBP,eAAvB,EAAwC;AAC7D;AACA,QAAII,QAAQ,GAAGJ,eAAe,GAAGA,eAAe,CAACwC,KAAhB,CAAsB,CAAtB,CAAH,GAA8BrD,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBJ,KAAK,CAACK,QAA7B,CAA5D;AACA,QAAIiF,UAAU,GAAGtF,KAAK,CAACE,IAAN,GAAaV,IAAI,CAACO,OAAL,CAAaC,KAAb,EAAoBQ,IAApB,CAAb,GAAyCE,SAA1D;AACA,QAAID,KAAK,GAAGT,KAAK,CAACS,KAAlB;AAAA,QACI8E,UAAU,GAAGvF,KAAK,CAACuF,UADvB;AAAA,QAEIC,QAAQ,GAAGxF,KAAK,CAACwF,QAFrB;AAAA,QAGIC,UAAU,GAAGzF,KAAK,CAACyF,UAHvB;AAAA,QAIIlE,SAAS,GAAGvB,KAAK,CAACuB,SAJtB;AAAA,QAKIE,SAAS,GAAGzB,KAAK,CAACyB,SALtB;AAAA,QAMImB,UAAU,GAAG5C,KAAK,CAAC4C,UANvB;AAOA,QAAI8C,eAAe,GAAG;AACpB9C,MAAAA,UAAU,EAAEA,UADQ;AAEpBnC,MAAAA,KAAK,EAAEA,KAFa;AAGpB8E,MAAAA,UAAU,EAAEA,UAHQ;AAIpBC,MAAAA,QAAQ,EAAEA,QAJU;AAKpBjE,MAAAA,SAAS,EAAEA,SALS;AAMpBE,MAAAA,SAAS,EAAEA,SANS;AAOpBgE,MAAAA,UAAU,EAAEA;AAPQ,KAAtB;AASA,QAAIE,WAAW,GAAGL,UAAU,GAAG1I,OAAO,CAAC8I,eAAD,EAAkB;AACtDxF,MAAAA,IAAI,EAAEoF;AADgD,KAAlB,CAAV,GAEvBI,eAFL;;AAIA,QAAIhD,QAAQ,GAAG,UAAU9B,KAAV,EAAiB;AAC9B,UAAI+B,WAAW,GAAG/F,OAAO,CAAC,EAAD,EAAKgE,KAAK,CAACZ,KAAX,EAAkB2F,WAAlB,CAAzB;;AAEA,UAAI,CAAClG,MAAM,CAACmG,iBAAP,CAAyBhF,KAAzB,CAAL,EAAsC;AACpC,eAAO,IAAP;AACD,OAFD,MAEO,IAAIA,KAAK,CAACC,IAAN,IAAcpE,WAAW,CAACmE,KAAK,CAACC,IAAN,CAAWK,SAAZ,CAA7B,EAAqD;AAC1D,eAAON,KAAK,CAACZ,KAAN,IAAeY,KAAK,CAACC,IAAN,CAAWK,SAAX,CAAqByB,WAArB,EAAkCnC,IAAlC,CAAtB;AACD,OAFM,MAEA;AACL,eAAOf,MAAM,CAACyB,SAAP,CAAiByB,WAAjB,EAA8BnC,IAA9B,CAAP;AACD;AACF,KAVD;;AAYA,QAAIqF,YAAY,GAAGjG,OAAO,CAACmD,cAAR,CAAuB1C,QAAvB,EAAiCqC,QAAjC,EAA2C1C,KAA3C,CAAnB;AACA,QAAIiC,GAAG,GAAG4D,YAAY,CAAC5I,MAAb,KAAwB,CAAxB,GAA4B,CAA5B,GAAgC0C,UAAU,CAACuC,WAAX,CAAuB2D,YAAvB,CAA1C;AACA,QAAI1D,GAAG,GAAG0D,YAAY,CAAC5I,MAAb,KAAwB,CAAxB,GAA4B,CAA5B,GAAgC0C,UAAU,CAACyC,WAAX,CAAuByD,YAAvB,CAA1C;AACA,WAAO,CAAC5D,GAAD,EAAME,GAAN,CAAP;AACD,GA5MY;AA6Mb2D,EAAAA,+BAA+B,EAAE,UAAUC,IAAV,EAAgB;AAC/C,QAAI1F,QAAQ,GAAG0F,IAAI,CAAC1F,QAApB;AAAA,QACIL,KAAK,GAAG+F,IAAI,CAAC/F,KADjB;AAAA,QAEIC,eAAe,GAAG8F,IAAI,CAAC9F,eAF3B;AAAA,QAGI0F,WAAW,GAAGI,IAAI,CAACJ,WAHvB;AAIA,QAAIK,yBAAyB,GAAG3F,QAAQ,CAAC4F,IAAT,CAAc,UAAUrF,KAAV,EAAiB;AAC7D,aAAOA,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWC,IAAX,KAAoB,WAAzC;AACD,KAF+B,CAAhC;AAGA,QAAIoF,wBAAwB,GAAGF,yBAAyB,IAAI3F,QAAQ,CAACpD,MAAtC,IAAgDoD,QAAQ,CAAC8F,KAAT,CAAe,UAAUvF,KAAV,EAAiB;AAC7G,aAAOA,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWC,IAAX,KAAoB,WAAzC;AACD,KAF8E,CAA/E;;AAIA,QAAIkF,yBAAyB,IAAI,CAACE,wBAAlC,EAA4D;AAC1DpG,MAAAA,GAAG,CAACsG,IAAJ,CAAS,+KAAT;AACD,KAd8C,CAc7C;AACF;;;AAGA,QAAI,CAACF,wBAAL,EAA+B;AAC7B,aAAOP,WAAP;AACD;;AAED,QAAIU,SAAS,GAAGrG,KAAK,CAACsG,IAAN,IAAcrG,eAAe,CAAC,CAAD,CAAf,CAAmBD,KAAnB,CAAyBsG,IAAvD,CAtB+C,CAsBc;;AAE7D,QAAI,CAACtH,KAAK,CAACE,OAAN,CAAcmH,SAAd,CAAL,EAA+B;AAC7B,UAAIE,YAAY,GAAGlG,QAAQ,CAACmG,MAAT,CAAgB,UAAUC,IAAV,EAAgB7F,KAAhB,EAAuB;AACxD,YAAI8F,SAAS,GAAG9G,OAAO,CAAC+G,cAAR,CAAuB/F,KAAK,CAACZ,KAAN,CAAYiB,CAAZ,IAAiB,GAAxC,CAAhB;AACA,eAAOwF,IAAI,CAAClJ,MAAL,CAAYqD,KAAK,CAACZ,KAAN,CAAYE,IAAZ,CAAiB0G,GAAjB,CAAqB,UAAUC,KAAV,EAAiB;AACvD,iBAAO;AACL5F,YAAAA,CAAC,EAAEyF,SAAS,CAACG,KAAD;AADP,WAAP;AAGD,SAJkB,CAAZ,CAAP;AAKD,OAPkB,EAOhB,EAPgB,CAAnB,CAD6B,CAQrB;AACR;;AAEA,UAAIC,yBAAyB,GAAGzG,QAAQ,CAAC,CAAD,CAAR,CAAYQ,IAAZ,CAAiBkG,gBAAjD;AACAV,MAAAA,SAAS,GAAGS,yBAAyB,CAAC;AACpC5G,QAAAA,IAAI,EAAEqG,YAD8B;AAEpCD,QAAAA,IAAI,EAAED;AAF8B,OAAD,CAAzB,CAGTG,MAHS,CAGF,UAAUC,IAAV,EAAgBO,KAAhB,EAAuBnC,KAAvB,EAA8B;AACtC,YAAIoC,EAAE,GAAGD,KAAK,CAACC,EAAf;AAAA,YACIC,EAAE,GAAGF,KAAK,CAACE,EADf;AAEA,eAAOrC,KAAK,KAAK,CAAV,GAAc4B,IAAI,CAAClJ,MAAL,CAAY,CAAC0J,EAAD,EAAKC,EAAL,CAAZ,CAAd,GAAsCT,IAAI,CAAClJ,MAAL,CAAY2J,EAAZ,CAA7C;AACD,OAPW,EAOT,EAPS,CAAZ;AAQD;;AAED,WAAOrK,aAAa,CAAC,EAAD,EAAK8I,WAAL,EAAkB;AACpCW,MAAAA,IAAI,EAAED;AAD8B,KAAlB,CAApB;AAGD,GA9PY;AA+Pb/F,EAAAA,mBAAmB,EAAE,UAAUN,KAAV,EAAiBC,eAAjB,EAAkC;AACrD,QAAIQ,KAAK,GAAGT,KAAK,CAACS,KAAlB;AAAA,QACI8E,UAAU,GAAGvF,KAAK,CAACuF,UADvB;AAAA,QAEIC,QAAQ,GAAGxF,KAAK,CAACwF,QAFrB;AAAA,QAGIC,UAAU,GAAGzF,KAAK,CAACyF,UAHvB;AAAA,QAIIlE,SAAS,GAAGvB,KAAK,CAACuB,SAJtB;AAAA,QAKIE,SAAS,GAAGzB,KAAK,CAACyB,SALtB;AAMA,QAAIkE,WAAW,GAAG;AAChBlF,MAAAA,KAAK,EAAEA,KADS;AAEhB8E,MAAAA,UAAU,EAAEA,UAFI;AAGhBC,MAAAA,QAAQ,EAAEA,QAHM;AAIhBC,MAAAA,UAAU,EAAEA,UAJI;AAKhBlE,MAAAA,SAAS,EAAEA,SALK;AAMhBE,MAAAA,SAAS,EAAEA;AANK,KAAlB;AAQA,QAAI0F,KAAK,GAAG,CAAZ;AACA,QAAI9G,QAAQ,GAAGJ,eAAe,GAAGA,eAAe,CAACwC,KAAhB,CAAsB,CAAtB,CAAH,GAA8BrD,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBJ,KAAK,CAACK,QAA7B,CAA5D;AACAsF,IAAAA,WAAW,GAAG,KAAKG,+BAAL,CAAqC;AACjDzF,MAAAA,QAAQ,EAAEA,QADuC;AAEjDL,MAAAA,KAAK,EAAEA,KAF0C;AAGjDC,MAAAA,eAAe,EAAEA,eAHgC;AAIjD0F,MAAAA,WAAW,EAAEA;AAJoC,KAArC,CAAd;;AAOA,QAAIjD,QAAQ,GAAG,UAAU9B,KAAV,EAAiBwG,SAAjB,EAA4BC,MAA5B,EAAoC;AACjD,UAAIC,UAAU,GAAG1K,OAAO,CAAC,EAAD,EAAKgE,KAAK,CAACZ,KAAX,EAAkB2F,WAAlB,CAAxB;;AAEA,UAAI4B,SAAJ;;AAEA,UAAI,CAAC/H,IAAI,CAACgI,eAAL,CAAqB5G,KAArB,CAAL,EAAkC;AAChC,eAAO,IAAP;AACD,OAFD,MAEO,IAAIA,KAAK,CAACC,IAAN,IAAcpE,WAAW,CAACmE,KAAK,CAACC,IAAN,CAAWd,OAAZ,CAA7B,EAAmD;AACxDa,QAAAA,KAAK,GAAGyG,MAAM,GAAGjI,KAAK,CAACqI,YAAN,CAAmB7G,KAAnB,EAA0ByG,MAAM,CAACrH,KAAjC,CAAH,GAA6CY,KAA3D;AACA2G,QAAAA,SAAS,GAAG3G,KAAK,CAACC,IAAN,CAAWd,OAAX,CAAmBuH,UAAnB,CAAZ;AACD,OAHM,MAGA;AACLC,QAAAA,SAAS,GAAG/H,IAAI,CAACO,OAAL,CAAauH,UAAb,CAAZ;AACD;;AAEDH,MAAAA,KAAK,IAAI,CAAT;AACA,aAAOI,SAAS,CAACX,GAAV,CAAc,UAAUC,KAAV,EAAiBhC,KAAjB,EAAwB;AAC3C,eAAOjI,OAAO,CAAC;AACb8K,UAAAA,MAAM,EAAEP,KADK;AAEbQ,UAAAA,MAAM,EAAE9C;AAFK,SAAD,EAGXgC,KAHW,CAAd;AAID,OALM,CAAP;AAMD,KArBD;;AAuBA,QAAIe,OAAO,GAAGvH,QAAQ,CAAC7C,MAAT,CAAgB,UAAUoG,CAAV,EAAa;AACzC,aAAOA,CAAC,CAAC/C,IAAF,IAAU+C,CAAC,CAAC/C,IAAF,CAAOC,IAAP,KAAgB,OAAjC;AACD,KAFa,EAEX7D,MAFH;;AAIA,QAAI4K,OAAO,GAAG,UAAUpB,IAAV,EAAgBqB,GAAhB,EAAqB;AACjC,aAAOrB,IAAI,CAAClJ,MAAL,CAAYlB,OAAO,CAACyL,GAAD,EAAM,QAAN,CAAnB,CAAP;AACD,KAFD;;AAIA,QAAIC,QAAQ,GAAGnI,OAAO,CAACmD,cAAR,CAAuB1C,QAAvB,EAAiCqC,QAAjC,EAA2C1C,KAA3C,EAAkD,EAAlD,EAAsD6H,OAAtD,CAAf;AACA,QAAIG,KAAK,GAAGJ,OAAO,GAAG,QAAH,GAAc,QAAjC;AACA,WAAOxL,OAAO,CAACE,QAAQ,CAACyL,QAAD,EAAWC,KAAX,CAAT,CAAd;AACD,GAzTY;AA0TbC,EAAAA,QAAQ,EAAE,UAAUC,eAAV,EAA2BtH,KAA3B,EAAkCiE,KAAlC,EAAyC;AACjD;AACA,QAAIsD,KAAK,GAAGD,eAAe,CAACC,KAA5B;AACA,QAAIC,UAAU,GAAGF,eAAe,CAACE,UAAjC;AAAA,QACIC,KAAK,GAAGH,eAAe,CAACG,KAD5B;;AAGA,QAAIF,KAAK,IAAIA,KAAK,CAACjI,IAAf,IAAuBiI,KAAK,CAACjI,IAAN,CAAWoI,IAAtC,EAA4C;AAC1C,aAAOH,KAAK,CAACjI,IAAN,CAAWoI,IAAlB;AACD;;AAEDF,IAAAA,UAAU,GAAGxH,KAAK,CAACZ,KAAN,IAAeY,KAAK,CAACZ,KAAN,CAAYoI,UAA3B,GAAwCxH,KAAK,CAACZ,KAAN,CAAYoI,UAApD,GAAiEA,UAA9E;AACAC,IAAAA,KAAK,GAAGzH,KAAK,CAACZ,KAAN,IAAeY,KAAK,CAACZ,KAAN,CAAYqI,KAA3B,GAAmCzH,KAAK,CAACZ,KAAN,CAAYqI,KAA/C,GAAuDA,KAA/D;;AAEA,QAAI,CAACD,UAAD,IAAe,CAACC,KAApB,EAA2B;AACzB,aAAO3H,SAAP;AACD;;AAED,QAAI6H,MAAM,GAAGvJ,KAAK,CAACE,OAAN,CAAckJ,UAAd,IAA4BA,UAA5B,GAAyC9I,KAAK,CAACkJ,aAAN,CAAoBJ,UAApB,CAAtD;AACA,WAAOC,KAAK,IAAIE,MAAM,CAAC1D,KAAK,GAAG0D,MAAM,CAACtL,MAAhB,CAAtB;AACD,GA7UY;AA8UbwL,EAAAA,QAAQ,EAAE,UAAUzI,KAAV,EAAiB;AACzB,QAAI+H,QAAQ,GAAG/H,KAAK,CAAC+H,QAArB;AAAA,QACIW,KAAK,GAAG1I,KAAK,CAAC0I,KADlB;AAAA,QAEI9F,UAAU,GAAG5C,KAAK,CAAC4C,UAFvB;AAGA,QAAI+F,KAAK,GAAG/F,UAAU,GAAG8F,KAAK,CAAC9G,CAAN,CAAQ+G,KAAR,EAAH,GAAqBD,KAAK,CAACzH,CAAN,CAAQ0H,KAAR,EAA3C;AACA,QAAIC,MAAM,GAAGC,IAAI,CAACC,GAAL,CAASH,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAzB,CAAb;AACA,QAAII,YAAY,GAAG/J,KAAK,CAACE,OAAN,CAAc6I,QAAQ,CAAC,CAAD,CAAtB,IAA6BA,QAAQ,CAAC,CAAD,CAAR,CAAY9K,MAAzC,GAAkD,CAArE;AACA,QAAI+L,IAAI,GAAGjB,QAAQ,CAAC9K,MAAT,GAAkB8L,YAAlB,GAAiC,CAA5C;AACA,QAAIE,QAAQ,GAAG,GAAf;AACA,WAAO;AACLC,MAAAA,KAAK,EAAEL,IAAI,CAACM,KAAL,CAAWF,QAAQ,GAAGL,MAAX,GAAoBI,IAA/B;AADF,KAAP;AAGD,GA1VY;AA2VbI,EAAAA,QAAQ,EAAE,UAAUC,KAAV,EAAiBlB,KAAjB,EAAwBrH,IAAxB,EAA8B;AACtC,QAAIwI,YAAY,GAAGD,KAAK,IAAIA,KAAK,CAACvI,IAAD,CAAd,IAAwBuI,KAAK,CAACvI,IAAD,CAAL,CAAYqH,KAApC,GAA4CkB,KAAK,CAACvI,IAAD,CAAL,CAAYqH,KAAxD,GAAgE,EAAnF;AACA,WAAOvI,OAAO,CAAC2J,SAAR,CAAkBpB,KAAlB,EAAyBmB,YAAzB,CAAP;AACD,GA9VY;AA+VbE,EAAAA,aAAa,EAAE,UAAU5I,KAAV,EAAiBiE,KAAjB,EAAwBqD,eAAxB,EAAyC;AACtD,QAAIC,KAAK,GAAGD,eAAe,CAACC,KAA5B;AAAA,QACIrH,IAAI,GAAGoH,eAAe,CAACpH,IAD3B;AAEA,QAAI2I,UAAU,GAAG7I,KAAK,CAACZ,KAAN,CAAYmI,KAAZ,IAAqB,EAAtC;;AAEA,QAAInJ,KAAK,CAACE,OAAN,CAAcuK,UAAd,CAAJ,EAA+B;AAC7B,aAAOA,UAAP;AACD;;AAED,QAAIC,SAAS,GAAG9I,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWC,IAAzC;AACA,QAAI6I,WAAW,GAAGD,SAAS,KAAK,OAAd,GAAwBhJ,SAAxB,GAAoC,KAAKuH,QAAL,CAAcC,eAAd,EAA+BtH,KAA/B,EAAsCiE,KAAtC,CAAtD;AACA,QAAI+E,YAAY,GAAGF,SAAS,KAAK,MAAd,GAAuB;AACxCpB,MAAAA,IAAI,EAAE,MADkC;AAExCuB,MAAAA,MAAM,EAAEF;AAFgC,KAAvB,GAGf;AACFrB,MAAAA,IAAI,EAAEqB;AADJ,KAHJ;AAMA,QAAIG,SAAS,GAAGhJ,IAAI,KAAK,OAAT,GAAmB,EAAnB,GAAwB,KAAK2H,QAAL,CAAcP,eAAd,CAAxC;;AAEA,QAAI6B,SAAS,GAAGpN,SAAS,CAAC,EAAD,EAAK8M,UAAU,CAACvJ,IAAhB,EAAsBtD,OAAO,CAAC,EAAD,EAAKkN,SAAL,EAAgB3B,KAAK,CAACjI,IAAtB,EAA4B0J,YAA5B,CAA7B,CAAzB;;AAEA,QAAII,WAAW,GAAGrN,SAAS,CAAC,EAAD,EAAK8M,UAAU,CAACQ,MAAhB,EAAwB9B,KAAK,CAAC8B,MAA9B,CAA3B;;AAEA,WAAO;AACL5C,MAAAA,MAAM,EAAEc,KAAK,CAACd,MADT;AAELnH,MAAAA,IAAI,EAAE6J,SAFD;AAGLE,MAAAA,MAAM,EAAED;AAHH,KAAP;AAKD,GA3XY;AA4XbE,EAAAA,wBAAwB,EAAE,UAAUjK,eAAV,EAA2BO,IAA3B,EAAiC;AACzD,QAAIkC,QAAQ,GAAG,UAAU9B,KAAV,EAAiB;AAC9B,UAAI0G,UAAU,GAAG1G,KAAK,CAACZ,KAAN,IAAe,EAAhC;;AAEA,UAAI,CAACP,MAAM,CAACmG,iBAAP,CAAyBhF,KAAzB,CAAD,IAAoC,CAAC0G,UAAU,CAAC7B,UAApD,EAAgE;AAC9D,eAAO,IAAP;AACD,OAFD,MAEO;AACL,YAAIA,UAAU,GAAG6B,UAAU,CAAC7B,UAAX,IAAyB,CAACzG,KAAK,CAACE,OAAN,CAAcoI,UAAU,CAAC7B,UAAzB,CAA1B,GAAiE6B,UAAU,CAAC7B,UAAX,CAAsBjF,IAAtB,CAAjE,GAA+F8G,UAAU,CAACtH,KAAX,CAAiByF,UAAjI;AACA,YAAI0E,eAAe,GAAG1E,UAAU,IAAIA,UAAU,CAACjI,MAAX,CAAkB,UAAUsK,GAAV,EAAe;AACnE,iBAAO,OAAOA,GAAP,KAAe,QAAtB;AACD,SAFmC,CAApC;AAGA,eAAOqC,eAAe,GAAGxK,UAAU,CAACyK,eAAX,CAA2BD,eAA3B,CAAH,GAAiD,EAAvE;AACD;AACF,KAZD;;AAcA,WAAOvK,OAAO,CAACmD,cAAR,CAAuB9C,eAAe,CAACwC,KAAhB,CAAsB,CAAtB,CAAvB,EAAiDC,QAAjD,CAAP;AACD,GA5YY;AA6Yb2H,EAAAA,kBAAkB,EAAE,UAAUpK,eAAV,EAA2B;AAC7C,QAAIyC,QAAQ,GAAG,UAAU9B,KAAV,EAAiB;AAC9B,UAAI0G,UAAU,GAAG1G,KAAK,CAACZ,KAAN,IAAe,EAAhC;AACA,UAAIE,IAAJ;;AAEA,UAAI,CAACV,IAAI,CAACgI,eAAL,CAAqB5G,KAArB,CAAL,EAAkC;AAChC,eAAO,IAAP;AACD,OAFD,MAEO,IAAIA,KAAK,CAACC,IAAN,IAAcpE,WAAW,CAACmE,KAAK,CAACC,IAAN,CAAWd,OAAZ,CAA7B,EAAmD;AACxDG,QAAAA,IAAI,GAAGU,KAAK,CAACC,IAAN,CAAWd,OAAX,CAAmBuH,UAAnB,CAAP;AACD,OAFM,MAEA;AACLpH,QAAAA,IAAI,GAAGV,IAAI,CAACO,OAAL,CAAauH,UAAb,CAAP;AACD;;AAED,aAAOpH,IAAI,CAAC0G,GAAL,CAAS,UAAU0D,CAAV,EAAa;AAC3B,eAAO;AACLrJ,UAAAA,CAAC,EAAEqJ,CAAC,CAACC,KADA;AAEL3I,UAAAA,CAAC,EAAE0I,CAAC,CAACE;AAFA,SAAP;AAID,OALM,CAAP;AAMD,KAlBD;;AAoBA,QAAIC,WAAW,GAAG;AAChBxJ,MAAAA,CAAC,EAAE,EADa;AAEhBW,MAAAA,CAAC,EAAE;AAFa,KAAlB;;AAKA,QAAIiG,OAAO,GAAG,UAAUpB,IAAV,EAAgBI,KAAhB,EAAuB;AACnC,UAAI5F,CAAC,GAAGjC,KAAK,CAACE,OAAN,CAAc2H,KAAd,IAAuBA,KAAK,CAACD,GAAN,CAAU,UAAU0D,CAAV,EAAa;AACpD,eAAOA,CAAC,CAACrJ,CAAT;AACD,OAF8B,EAE5BzD,MAF4B,CAErBkN,OAFqB,CAAvB,GAEa7D,KAAK,CAAC5F,CAF3B;AAGA,UAAIW,CAAC,GAAG5C,KAAK,CAACE,OAAN,CAAc2H,KAAd,IAAuBA,KAAK,CAACD,GAAN,CAAU,UAAU0D,CAAV,EAAa;AACpD,eAAOA,CAAC,CAAC1I,CAAT;AACD,OAF8B,EAE5BpE,MAF4B,CAErBkN,OAFqB,CAAvB,GAEa7D,KAAK,CAACjF,CAF3B;AAGA,aAAO;AACLX,QAAAA,CAAC,EAAEA,CAAC,KAAKP,SAAN,GAAkB+F,IAAI,CAACxF,CAAL,CAAO1D,MAAP,CAAc0D,CAAd,CAAlB,GAAqCwF,IAAI,CAACxF,CADxC;AAELW,QAAAA,CAAC,EAAEA,CAAC,KAAKlB,SAAN,GAAkB+F,IAAI,CAAC7E,CAAL,CAAOrE,MAAP,CAAcqE,CAAd,CAAlB,GAAqC6E,IAAI,CAAC7E;AAFxC,OAAP;AAID,KAXD;;AAaA,WAAOhC,OAAO,CAACmD,cAAR,CAAuB9C,eAAe,CAACwC,KAAhB,CAAsB,CAAtB,CAAvB,EAAiDC,QAAjD,EAA2D,EAA3D,EAA+D+H,WAA/D,EAA4E5C,OAA5E,CAAP;AACD,GArbY;AAsbb8C,EAAAA,qCAAqC,EAAE,UAAU3K,KAAV,EAAiBQ,IAAjB,EAAuBP,eAAvB,EAAwC;AAC7E,QAAIwF,UAAU,GAAGtJ,cAAc,CAAC6D,KAAK,CAACyF,UAAP,CAAd,GAAmCzF,KAAK,CAACyF,UAAN,CAAiBjF,IAAjB,CAAnC,GAA4DR,KAAK,CAACyF,UAAnF;AACA,QAAImF,aAAa,GAAGvL,IAAI,CAACwL,gBAAL,CAAsB5K,eAAtB,EAAuCO,IAAvC,CAApB;AACA,QAAIsK,WAAW,GAAGF,aAAa,GAAGpL,IAAI,CAACuL,kBAAL,CAAwBH,aAAa,CAAC5K,KAAtC,EAA6CQ,IAA7C,CAAH,GAAwD,EAAvF;AACA,QAAI2J,eAAe,GAAG1E,UAAU,IAAI,KAAKyE,wBAAL,CAA8BjK,eAA9B,EAA+CO,IAA/C,CAApC;AACA,WAAOhE,KAAK,CAACE,QAAQ,CAAC0B,kBAAkB,CAAC+L,eAAD,CAAlB,CAAoC5M,MAApC,CAA2Ca,kBAAkB,CAAC0M,WAAD,CAA7D,CAAD,CAAT,CAAZ;AACD,GA5bY;AA6bbE,EAAAA,sBAAsB,EAAE,UAAUhL,KAAV,EAAiBC,eAAjB,EAAkC;AACxDA,IAAAA,eAAe,GAAGA,eAAe,IAAIb,KAAK,CAACe,QAAN,CAAeC,OAAf,CAAuBJ,KAAK,CAACK,QAA7B,CAArC;AACA,QAAI4K,QAAQ,GAAG,KAAKN,qCAAL,CAA2C3K,KAA3C,EAAkD,GAAlD,EAAuDC,eAAvD,CAAf;AACA,QAAIiL,QAAQ,GAAG,KAAKP,qCAAL,CAA2C3K,KAA3C,EAAkD,GAAlD,EAAuDC,eAAvD,CAAf;AACA,QAAIkL,WAAW,GAAG,KAAKd,kBAAL,CAAwBpK,eAAxB,CAAlB;AACA,WAAO;AACLgB,MAAAA,CAAC,EAAEzE,KAAK,CAACE,QAAQ,CAAC0B,kBAAkB,CAAC6M,QAAD,CAAlB,CAA6B1N,MAA7B,CAAoCa,kBAAkB,CAAC+M,WAAW,CAAClK,CAAb,CAAtD,CAAD,CAAT,CADH;AAELW,MAAAA,CAAC,EAAEpF,KAAK,CAACE,QAAQ,CAAC0B,kBAAkB,CAAC8M,QAAD,CAAlB,CAA6B3N,MAA7B,CAAoCa,kBAAkB,CAAC+M,WAAW,CAACvJ,CAAb,CAAtD,CAAD,CAAT;AAFH,KAAP;AAID,GAtcY;AAucbwJ,EAAAA,aAAa,EAAE,UAAUpL,KAAV,EAAiBC,eAAjB,EAAkCoL,UAAlC,EAA8C;AAC3D,QAAIC,eAAe,GAAGtL,KAAK,CAACyF,UAAN,IAAoB,CAACzG,KAAK,CAACE,OAAN,CAAcc,KAAK,CAACyF,UAApB,CAArB,GAAuDzF,KAAK,CAACyF,UAAN,CAAiBxE,CAAxE,GAA4EjB,KAAK,CAACyF,UAAxG;AACA,QAAI8F,eAAe,GAAGvL,KAAK,CAACyF,UAAN,IAAoB,CAACzG,KAAK,CAACE,OAAN,CAAcc,KAAK,CAACyF,UAApB,CAArB,GAAuDzF,KAAK,CAACyF,UAAN,CAAiB7D,CAAxE,GAA4E5B,KAAK,CAACyF,UAAxG;AACA,QAAI+F,gBAAgB,GAAG,CAACF,eAAD,IAAoB,CAACC,eAA5C;AACA,QAAIE,aAAa,GAAGD,gBAAgB,GAAGH,UAAU,IAAI,KAAKL,sBAAL,CAA4BhL,KAA5B,EAAmCC,eAAnC,CAAjB,GAAuE,EAA3G;AACA,QAAIyL,WAAW,GAAGJ,eAAe,IAAIG,aAAa,CAACxK,CAAnD;AACA,QAAI0K,WAAW,GAAGJ,eAAe,IAAIE,aAAa,CAAC7J,CAAnD;AACA,WAAO;AACLX,MAAAA,CAAC,EAAEyK,WAAW,CAACzO,MAAZ,GAAqB,CAArB,GAAyByO,WAAzB,GAAuChL,SADrC;AAELkB,MAAAA,CAAC,EAAE+J,WAAW,CAAC1O,MAAZ,GAAqB,CAArB,GAAyB0O,WAAzB,GAAuCjL;AAFrC,KAAP;AAID;AAldY,CAAf","sourcesContent":["import _isPlainObject from \"lodash/isPlainObject\";\nimport _values from \"lodash/values\";\nimport _uniqBy from \"lodash/uniqBy\";\nimport _groupBy from \"lodash/groupBy\";\nimport _some from \"lodash/some\";\nimport _uniq from \"lodash/uniq\";\nimport _isFunction from \"lodash/isFunction\";\nimport _flatten from \"lodash/flatten\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nimport React from \"react\";\nimport Axis from \"./axis\";\nimport Style from \"./style\";\nimport Transitions from \"./transitions\";\nimport Data from \"./data\";\nimport Domain from \"./domain\";\nimport Events from \"./events\";\nimport Collection from \"./collection\";\nimport Helpers from \"./helpers\";\nimport Scale from \"./scale\";\nimport Log from \"./log\";\nexport default {\n  getData: function (props, childComponents) {\n    if (props.data) {\n      return Data.getData(props);\n    }\n\n    childComponents = childComponents || React.Children.toArray(props.children);\n    return this.getDataFromChildren(childComponents);\n  },\n  getDefaultDomainPadding: function (props, axis, childComponents) {\n    if (props.polar || axis !== \"x\") {\n      return undefined;\n    }\n\n    var groupComponent = childComponents.filter(function (child) {\n      return child.type && child.type.role && child.type.role === \"group\";\n    });\n\n    if (groupComponent.length < 1) {\n      return undefined;\n    }\n\n    var _groupComponent$0$pro = groupComponent[0].props,\n        offset = _groupComponent$0$pro.offset,\n        children = _groupComponent$0$pro.children;\n    return {\n      x: offset * children.length / 2\n    };\n  },\n  getDomain: function (props, axis, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var propsDomain = Domain.getDomainFromProps(props, axis);\n    var domainPadding = this.getDefaultDomainPadding(props, axis, childComponents);\n    var domain;\n\n    if (propsDomain) {\n      domain = propsDomain;\n    } else {\n      var minDomain = Domain.getMinFromProps(props, axis);\n      var maxDomain = Domain.getMaxFromProps(props, axis);\n      var dataset = (props.data || props.y) && Data.getData(props);\n      var dataDomain = dataset ? Domain.getDomainFromData(props, axis, dataset) : [];\n      var childDomain = this.getDomainFromChildren(props, axis, childComponents);\n      var min = minDomain || Collection.getMinValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      var max = maxDomain || Collection.getMaxValue(_toConsumableArray(dataDomain).concat(_toConsumableArray(childDomain)));\n      domain = Domain.getDomainFromMinMax(min, max);\n    }\n\n    return Domain.formatDomain(domain, _assign({\n      domainPadding: domainPadding\n    }, props), axis);\n  },\n  getScale: function (props, axis, childComponents) {\n    if (props.data) {\n      return Scale.getBaseScale(props, axis);\n    }\n\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, {\n        horizontal: props.horizontal\n      });\n\n      return Scale.getScaleType(sharedProps, axis);\n    };\n\n    var childScale = _uniq(Helpers.reduceChildren(children, iteratee, props)); // default to linear scale if more than one uniq scale type is given by children\n\n\n    return childScale.length > 1 ? Scale.getScaleFromName(\"linear\") : Scale.getScaleFromName(childScale[0]);\n  },\n  setAnimationState: function (props, nextProps) {\n    if (!props.animate) {\n      return;\n    }\n\n    if (props.animate.parentState) {\n      var nodesWillExit = props.animate.parentState.nodesWillExit;\n      var oldProps = nodesWillExit ? props : null;\n      this.setState(_defaults({\n        oldProps: oldProps,\n        nextProps: nextProps\n      }, props.animate.parentState));\n    } else {\n      var oldChildren = React.Children.toArray(props.children);\n      var nextChildren = React.Children.toArray(nextProps.children);\n\n      var isContinuous = function (child) {\n        var check = function (c) {\n          return c.type && c.type.continuous;\n        };\n\n        return Array.isArray(child) ? _some(child, check) : check(child);\n      };\n\n      var continuous = !props.polar && _some(oldChildren, function (child) {\n        return isContinuous(child) || child.props.children && isContinuous(child.props.children);\n      });\n\n      var _Transitions$getIniti = Transitions.getInitialTransitionState(oldChildren, nextChildren),\n          _nodesWillExit = _Transitions$getIniti.nodesWillExit,\n          nodesWillEnter = _Transitions$getIniti.nodesWillEnter,\n          childrenTransitions = _Transitions$getIniti.childrenTransitions,\n          nodesShouldEnter = _Transitions$getIniti.nodesShouldEnter;\n\n      this.setState({\n        nodesWillExit: _nodesWillExit,\n        nodesWillEnter: nodesWillEnter,\n        nodesShouldEnter: nodesShouldEnter,\n        childrenTransitions: Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[0] : childrenTransitions,\n        oldProps: _nodesWillExit ? props : null,\n        nextProps: nextProps,\n        continuous: continuous\n      });\n    }\n  },\n  getAllEvents: function (props) {\n    var components = [\"groupComponent\", \"containerComponent\", \"labelComponent\"];\n    this.componentEvents = Events.getComponentEvents(props, components);\n    var events = props.events;\n\n    if (Array.isArray(this.componentEvents)) {\n      var _componentEvents;\n\n      events = Array.isArray(props.events) ? (_componentEvents = this.componentEvents).concat.apply(_componentEvents, _toConsumableArray(props.events)) : this.componentEvents;\n    }\n\n    return events || [];\n  },\n  getAnimationProps: function (props, child, index) {\n    var _this = this;\n\n    if (!props.animate) {\n      return child.props.animate;\n    }\n\n    var getFilteredState = function () {\n      var childrenTransitions = _this.state && _this.state.childrenTransitions;\n      childrenTransitions = Collection.isArrayOfArrays(childrenTransitions) ? childrenTransitions[index] : childrenTransitions;\n      return _defaults({\n        childrenTransitions: childrenTransitions\n      }, _this.state);\n    };\n\n    var getTransitions = props.animate && props.animate.getTransitions;\n    var state = getFilteredState();\n    var parentState = props.animate && props.animate.parentState || state;\n\n    if (!getTransitions) {\n      var getTransitionProps = Transitions.getTransitionPropsFactory(props, state, function (newState) {\n        return _this.setState(newState);\n      });\n\n      getTransitions = function (childComponent) {\n        return getTransitionProps(childComponent, index);\n      };\n    }\n\n    return _defaults({\n      getTransitions: getTransitions,\n      parentState: parentState\n    }, props.animate, child.props.animate);\n  },\n  getDomainFromChildren: function (props, axis, childComponents) {\n    // eslint-disable-line max-statements, complexity, max-len\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    var parentData = props.data ? Data.getData(props, axis) : undefined;\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain,\n        horizontal = props.horizontal;\n    var baseParentProps = {\n      horizontal: horizontal,\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      minDomain: minDomain,\n      maxDomain: maxDomain,\n      categories: categories\n    };\n    var parentProps = parentData ? _assign(baseParentProps, {\n      data: parentData\n    }) : baseParentProps;\n\n    var iteratee = function (child) {\n      var sharedProps = _assign({}, child.props, parentProps);\n\n      if (!Domain.isDomainComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getDomain)) {\n        return child.props && child.type.getDomain(sharedProps, axis);\n      } else {\n        return Domain.getDomain(sharedProps, axis);\n      }\n    };\n\n    var childDomains = Helpers.reduceChildren(children, iteratee, props);\n    var min = childDomains.length === 0 ? 0 : Collection.getMinValue(childDomains);\n    var max = childDomains.length === 0 ? 1 : Collection.getMaxValue(childDomains);\n    return [min, max];\n  },\n  addBinsToParentPropsIfHistogram: function (_ref) {\n    var children = _ref.children,\n        props = _ref.props,\n        childComponents = _ref.childComponents,\n        parentProps = _ref.parentProps;\n    var someChildrenAreHistograms = children.some(function (child) {\n      return child.type && child.type.role === \"histogram\";\n    });\n    var allChildrenAreHistograms = someChildrenAreHistograms && children.length && children.every(function (child) {\n      return child.type && child.type.role === \"histogram\";\n    });\n\n    if (someChildrenAreHistograms && !allChildrenAreHistograms) {\n      Log.warn(\"VictoryHistogram only supports being stacked with other VictoryHistogram components. Check to make sure that you are only passing VictoryHistogram components to VictoryStack\");\n    } // if we are stacking histograms, we need to generate explicit bins\n    // or else each histogram may end up having different bins\n\n\n    if (!allChildrenAreHistograms) {\n      return parentProps;\n    }\n\n    var childBins = props.bins || childComponents[0].props.bins; // if we have explicit bins then we don't need to calculate them\n\n    if (!Array.isArray(childBins)) {\n      var combinedData = children.reduce(function (memo, child) {\n        var xAccessor = Helpers.createAccessor(child.props.x || \"x\");\n        return memo.concat(child.props.data.map(function (datum) {\n          return {\n            x: xAccessor(datum)\n          };\n        }));\n      }, []); // use the same function to generate bins as VictoryHistogram but with\n      // the combined data from above, then get explicit bins from that\n\n      var getFormattedHistogramData = children[0].type.getFormattedData;\n      childBins = getFormattedHistogramData({\n        data: combinedData,\n        bins: childBins\n      }).reduce(function (memo, _ref2, index) {\n        var x0 = _ref2.x0,\n            x1 = _ref2.x1;\n        return index === 0 ? memo.concat([x0, x1]) : memo.concat(x1);\n      }, []);\n    }\n\n    return _objectSpread({}, parentProps, {\n      bins: childBins\n    });\n  },\n  getDataFromChildren: function (props, childComponents) {\n    var polar = props.polar,\n        startAngle = props.startAngle,\n        endAngle = props.endAngle,\n        categories = props.categories,\n        minDomain = props.minDomain,\n        maxDomain = props.maxDomain;\n    var parentProps = {\n      polar: polar,\n      startAngle: startAngle,\n      endAngle: endAngle,\n      categories: categories,\n      minDomain: minDomain,\n      maxDomain: maxDomain\n    };\n    var stack = 0;\n    var children = childComponents ? childComponents.slice(0) : React.Children.toArray(props.children);\n    parentProps = this.addBinsToParentPropsIfHistogram({\n      children: children,\n      props: props,\n      childComponents: childComponents,\n      parentProps: parentProps\n    });\n\n    var iteratee = function (child, childName, parent) {\n      var childProps = _assign({}, child.props, parentProps);\n\n      var childData;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        child = parent ? React.cloneElement(child, parent.props) : child;\n        childData = child.type.getData(childProps);\n      } else {\n        childData = Data.getData(childProps);\n      }\n\n      stack += 1;\n      return childData.map(function (datum, index) {\n        return _assign({\n          _stack: stack,\n          _group: index\n        }, datum);\n      });\n    };\n\n    var stacked = children.filter(function (c) {\n      return c.type && c.type.role === \"stack\";\n    }).length;\n\n    var combine = function (memo, val) {\n      return memo.concat(_uniqBy(val, \"_group\"));\n    };\n\n    var datasets = Helpers.reduceChildren(children, iteratee, props, [], combine);\n    var group = stacked ? \"_group\" : \"_stack\";\n    return _values(_groupBy(datasets, group));\n  },\n  getColor: function (calculatedProps, child, index) {\n    // check for styles first\n    var style = calculatedProps.style;\n    var colorScale = calculatedProps.colorScale,\n        color = calculatedProps.color;\n\n    if (style && style.data && style.data.fill) {\n      return style.data.fill;\n    }\n\n    colorScale = child.props && child.props.colorScale ? child.props.colorScale : colorScale;\n    color = child.props && child.props.color ? child.props.color : color;\n\n    if (!colorScale && !color) {\n      return undefined;\n    }\n\n    var colors = Array.isArray(colorScale) ? colorScale : Style.getColorScale(colorScale);\n    return color || colors[index % colors.length];\n  },\n  getWidth: function (props) {\n    var datasets = props.datasets,\n        scale = props.scale,\n        horizontal = props.horizontal;\n    var range = horizontal ? scale.y.range() : scale.x.range();\n    var extent = Math.abs(range[1] - range[0]);\n    var seriesLength = Array.isArray(datasets[0]) ? datasets[0].length : 1;\n    var bars = datasets.length * seriesLength + 2;\n    var barRatio = 0.5;\n    return {\n      width: Math.round(barRatio * extent / bars)\n    };\n  },\n  getStyle: function (theme, style, role) {\n    var defaultStyle = theme && theme[role] && theme[role].style ? theme[role].style : {};\n    return Helpers.getStyles(style, defaultStyle);\n  },\n  getChildStyle: function (child, index, calculatedProps) {\n    var style = calculatedProps.style,\n        role = calculatedProps.role;\n    var childStyle = child.props.style || {};\n\n    if (Array.isArray(childStyle)) {\n      return childStyle;\n    }\n\n    var childRole = child.type && child.type.role;\n    var defaultFill = childRole === \"stack\" ? undefined : this.getColor(calculatedProps, child, index);\n    var defaultColor = childRole === \"line\" ? {\n      fill: \"none\",\n      stroke: defaultFill\n    } : {\n      fill: defaultFill\n    };\n    var dataWidth = role === \"stack\" ? {} : this.getWidth(calculatedProps);\n\n    var dataStyle = _defaults({}, childStyle.data, _assign({}, dataWidth, style.data, defaultColor));\n\n    var labelsStyle = _defaults({}, childStyle.labels, style.labels);\n\n    return {\n      parent: style.parent,\n      data: dataStyle,\n      labels: labelsStyle\n    };\n  },\n  getStringsFromCategories: function (childComponents, axis) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n\n      if (!Domain.isDomainComponent(child) || !childProps.categories) {\n        return null;\n      } else {\n        var categories = childProps.categories && !Array.isArray(childProps.categories) ? childProps.categories[axis] : childProps.props.categories;\n        var categoryStrings = categories && categories.filter(function (val) {\n          return typeof val === \"string\";\n        });\n        return categoryStrings ? Collection.removeUndefined(categoryStrings) : [];\n      }\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee);\n  },\n  getStringsFromData: function (childComponents) {\n    var iteratee = function (child) {\n      var childProps = child.props || {};\n      var data;\n\n      if (!Data.isDataComponent(child)) {\n        return null;\n      } else if (child.type && _isFunction(child.type.getData)) {\n        data = child.type.getData(childProps);\n      } else {\n        data = Data.getData(childProps);\n      }\n\n      return data.map(function (d) {\n        return {\n          x: d.xName,\n          y: d.yName\n        };\n      });\n    };\n\n    var initialMemo = {\n      x: [],\n      y: []\n    };\n\n    var combine = function (memo, datum) {\n      var x = Array.isArray(datum) ? datum.map(function (d) {\n        return d.x;\n      }).filter(Boolean) : datum.x;\n      var y = Array.isArray(datum) ? datum.map(function (d) {\n        return d.y;\n      }).filter(Boolean) : datum.y;\n      return {\n        x: x !== undefined ? memo.x.concat(x) : memo.x,\n        y: y !== undefined ? memo.y.concat(y) : memo.y\n      };\n    };\n\n    return Helpers.reduceChildren(childComponents.slice(0), iteratee, {}, initialMemo, combine);\n  },\n  getCategoryAndAxisStringsFromChildren: function (props, axis, childComponents) {\n    var categories = _isPlainObject(props.categories) ? props.categories[axis] : props.categories;\n    var axisComponent = Axis.getAxisComponent(childComponents, axis);\n    var axisStrings = axisComponent ? Data.getStringsFromAxes(axisComponent.props, axis) : [];\n    var categoryStrings = categories || this.getStringsFromCategories(childComponents, axis);\n    return _uniq(_flatten(_toConsumableArray(categoryStrings).concat(_toConsumableArray(axisStrings))));\n  },\n  getStringsFromChildren: function (props, childComponents) {\n    childComponents = childComponents || React.Children.toArray(props.children);\n    var xStrings = this.getCategoryAndAxisStringsFromChildren(props, \"x\", childComponents);\n    var yStrings = this.getCategoryAndAxisStringsFromChildren(props, \"y\", childComponents);\n    var dataStrings = this.getStringsFromData(childComponents);\n    return {\n      x: _uniq(_flatten(_toConsumableArray(xStrings).concat(_toConsumableArray(dataStrings.x)))),\n      y: _uniq(_flatten(_toConsumableArray(yStrings).concat(_toConsumableArray(dataStrings.y))))\n    };\n  },\n  getCategories: function (props, childComponents, allStrings) {\n    var xPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.x : props.categories;\n    var yPropCategories = props.categories && !Array.isArray(props.categories) ? props.categories.y : props.categories;\n    var fallbackRequired = !xPropCategories || !yPropCategories;\n    var fallbackProps = fallbackRequired ? allStrings || this.getStringsFromChildren(props, childComponents) : {};\n    var xCategories = xPropCategories || fallbackProps.x;\n    var yCategories = yPropCategories || fallbackProps.y;\n    return {\n      x: xCategories.length > 0 ? xCategories : undefined,\n      y: yCategories.length > 0 ? yCategories : undefined\n    };\n  }\n};"]},"metadata":{},"sourceType":"module"}