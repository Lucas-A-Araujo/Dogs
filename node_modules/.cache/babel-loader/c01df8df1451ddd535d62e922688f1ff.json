{"ast":null,"code":"import _isPlainObject from \"lodash/isPlainObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, Scale, Domain, Data, LabelHelpers } from \"victory-core\";\nvar TYPES = [\"close\", \"open\", \"high\", \"low\"];\n\nvar getData = function (props) {\n  var accessorTypes = [\"x\", \"high\", \"low\", \"close\", \"open\"];\n  return Data.formatData(props.data, props, accessorTypes);\n};\n\nvar reduceData = function (dataset, axis, type) {\n  var yDataTypes = {\n    min: \"_low\",\n    max: \"_high\"\n  };\n  var dataType = axis === \"x\" ? \"_x\" : yDataTypes[type];\n  var baseCondition = type === \"min\" ? Infinity : -Infinity;\n  return dataset.reduce(function (memo, datum) {\n    var current = datum[dataType];\n    return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n  }, baseCondition);\n};\n\nvar getDomainFromData = function (props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var min = minDomain !== undefined ? minDomain : reduceData(dataset, axis, \"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceData(dataset, axis, \"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function (props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getLabelStyle = function (props, styleObject, namespace) {\n  var component = props[\"\".concat(namespace, \"LabelComponent\")];\n  var baseStyle = styleObject[\"\".concat(namespace, \"Labels\")] || styleObject.labels;\n\n  if (!Helpers.isTooltip(component)) {\n    return baseStyle;\n  }\n\n  var tooltipTheme = props.theme && props.theme.tooltip || {};\n  return _defaults({}, tooltipTheme.style, baseStyle);\n};\n\nvar getStyles = function (props, style) {\n  var defaultStyles = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var width = \"100%\";\n  var height = \"100%\";\n\n  if (!style) {\n    return _defaults({\n      parent: {\n        height: height,\n        width: width\n      }\n    }, defaultStyles);\n  }\n\n  var defaultParent = defaultStyles.parent || {};\n  var defaultLabels = defaultStyles.labels || {};\n  var defaultData = defaultStyles.data || {};\n\n  var labelStyle = _defaults({}, style.labels, defaultLabels);\n\n  return {\n    parent: _defaults({}, style.parent, defaultParent, {\n      width: width,\n      height: height\n    }),\n    labels: labelStyle,\n    data: _defaults({}, style.data, defaultData),\n    openLabels: _defaults({}, style.openLabels, getLabelStyle(props, defaultStyles, \"open\"), labelStyle),\n    closeLabels: _defaults({}, style.closeLabels, getLabelStyle(props, defaultStyles, \"close\"), labelStyle),\n    lowLabels: _defaults({}, style.lowLabels, getLabelStyle(props, defaultStyles, \"low\"), labelStyle),\n    highLabels: _defaults({}, style.highLabels, getLabelStyle(props, defaultStyles, \"high\"), labelStyle)\n  };\n};\n\nvar getCalculatedValues = function (props) {\n  var polar = props.polar;\n  var defaultStyle = Helpers.getDefaultStyles(props, \"candlestick\");\n  var style = getStyles(props, props.style, defaultStyle);\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  var defaultOrientation = props.horizontal ? \"top\" : \"right\";\n  var labelOrientation = props.labelOrientation || defaultOrientation;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin,\n    labelOrientation: labelOrientation\n  };\n};\n\nvar isTransparent = function (attr) {\n  return attr === \"none\" || attr === \"transparent\";\n};\n\nvar getDataStyles = function (datum, style, props) {\n  style = style || {};\n  var candleColor = datum._open > datum._close ? props.candleColors.negative : props.candleColors.positive;\n  var fill = style.fill || candleColor;\n  var strokeColor = style.stroke;\n  var stroke = isTransparent(strokeColor) ? fill : strokeColor || \"black\";\n  return _assign({}, style, {\n    stroke: stroke,\n    fill: fill\n  });\n};\n\nvar getText = function (props, type) {\n  var datum = props.datum,\n      index = props.index,\n      labels = props.labels;\n  var propName = \"\".concat(type, \"Labels\");\n  var labelProp = props[propName];\n\n  if (!labelProp && !labels) {\n    return null;\n  } else if (labelProp === true || labels === true) {\n    var dataName = \"_\".concat(type);\n    return \"\".concat(datum[dataName]);\n  }\n\n  return Array.isArray(labelProp) ? labelProp[index] : labelProp;\n};\n\nvar getCandleWidth = function (props, style) {\n  var data = props.data,\n      candleWidth = props.candleWidth,\n      scale = props.scale,\n      defaultCandleWidth = props.defaultCandleWidth;\n\n  if (candleWidth) {\n    return _isFunction(candleWidth) ? Helpers.evaluateProp(candleWidth, props) : candleWidth;\n  } else if (style && style.width) {\n    return style.width;\n  }\n\n  var range = scale.x.range();\n  var extent = Math.abs(range[1] - range[0]);\n  var candles = data.length + 2;\n  var candleRatio = props.candleRatio || 0.5;\n  var defaultWidth = candleRatio * (data.length < 2 ? defaultCandleWidth : extent / candles);\n  return Math.max(1, defaultWidth);\n};\n\nvar getOrientation = function (labelOrientation) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"labels\";\n  return _isPlainObject(labelOrientation) ? labelOrientation[type] : labelOrientation;\n};\n/* eslint-disable complexity*/\n\n\nvar calculatePlotValues = function (props) {\n  var positions = props.positions,\n      labelStyle = props.labelStyle,\n      x = props.x,\n      horizontal = props.horizontal,\n      computedType = props.computedType,\n      candleWidth = props.candleWidth,\n      orientation = props.orientation;\n  positions.labels = (positions.open + positions.close) / 2;\n  var signX = orientation === \"left\" ? -1 : 1;\n  var signY = orientation === \"top\" ? -1 : 1;\n\n  if (horizontal) {\n    var yValue = x;\n    var xValue = positions[computedType];\n    var dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (candleWidth / 2) + signY * (labelStyle.padding || 0) : 0;\n    var dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (labelStyle.padding || 1);\n    return {\n      yValue: yValue,\n      xValue: xValue,\n      dx: dx,\n      dy: dy\n    };\n  } else {\n    var _xValue = x;\n    var _yValue = positions[computedType];\n\n    var _dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (labelStyle.padding || 1) : 0;\n\n    var _dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (candleWidth / 2) + signX * (labelStyle.padding || 0);\n\n    return {\n      yValue: _yValue,\n      xValue: _xValue,\n      dx: _dx,\n      dy: _dy\n    };\n  }\n};\n/* eslint-enable complexity*/\n\n/* eslint-disable max-params*/\n\n\nvar getLabelProps = function (props, text, style, type) {\n  var x = props.x,\n      high = props.high,\n      low = props.low,\n      open = props.open,\n      close = props.close,\n      index = props.index,\n      scale = props.scale,\n      datum = props.datum,\n      data = props.data,\n      horizontal = props.horizontal,\n      candleWidth = props.candleWidth,\n      labelOrientation = props.labelOrientation,\n      theme = props.theme;\n  var component = props[\"\".concat(type, \"LabelComponent\")] || props.labelComponent;\n  var defaultOrientation = horizontal ? \"top\" : \"right\";\n  var orientation = component.props && component.props.orientation || getOrientation(labelOrientation, type) || defaultOrientation;\n  var positions = {\n    high: high,\n    low: low,\n    open: open,\n    close: close\n  };\n  var namespace = type ? \"\".concat(type, \"Labels\") : \"labels\";\n  var labelStyle = style[namespace] || style.labels;\n  var defaultVerticalAnchors = {\n    top: \"end\",\n    bottom: \"start\",\n    left: \"middle\",\n    right: \"middle\"\n  };\n  var defaultTextAnchors = {\n    left: \"end\",\n    right: \"start\",\n    top: \"middle\",\n    bottom: \"middle\"\n  };\n  var computedType = type ? type : \"labels\";\n  var plotProps = {\n    positions: positions,\n    labelStyle: labelStyle,\n    x: x,\n    horizontal: horizontal,\n    computedType: computedType,\n    candleWidth: candleWidth,\n    orientation: orientation\n  };\n\n  var _calculatePlotValues = calculatePlotValues(plotProps),\n      yValue = _calculatePlotValues.yValue,\n      xValue = _calculatePlotValues.xValue,\n      dx = _calculatePlotValues.dx,\n      dy = _calculatePlotValues.dy;\n\n  var labelProps = {\n    style: labelStyle,\n    y: yValue,\n    x: xValue,\n    dx: dx,\n    dy: dy,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: datum,\n    data: data,\n    orientation: orientation,\n    textAnchor: labelStyle.textAnchor || defaultTextAnchors[orientation],\n    verticalAnchor: labelStyle.verticalAnchor || defaultVerticalAnchors[orientation],\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n\n  if (!Helpers.isTooltip(component)) {\n    return labelProps;\n  }\n\n  var tooltipTheme = theme && theme.tooltip || {};\n  return _defaults({}, labelProps, Helpers.omit(tooltipTheme, [\"style\"]));\n};\n/* eslint-enable max-params*/\n\n\nvar getBaseProps = function (props, fallbackProps) {\n  // eslint-disable-line max-statements\n  props = Helpers.modifyProps(props, fallbackProps, \"candlestick\");\n  var calculatedValues = getCalculatedValues(props);\n  var data = calculatedValues.data,\n      style = calculatedValues.style,\n      scale = calculatedValues.scale,\n      domain = calculatedValues.domain,\n      origin = calculatedValues.origin,\n      labelOrientation = calculatedValues.labelOrientation;\n  var _props = props,\n      groupComponent = _props.groupComponent,\n      width = _props.width,\n      height = _props.height,\n      padding = _props.padding,\n      standalone = _props.standalone,\n      name = _props.name,\n      candleWidth = _props.candleWidth,\n      candleRatio = _props.candleRatio,\n      theme = _props.theme,\n      polar = _props.polar,\n      wickStrokeWidth = _props.wickStrokeWidth,\n      labels = _props.labels,\n      events = _props.events,\n      sharedEvents = _props.sharedEvents,\n      horizontal = _props.horizontal;\n  var initialChildProps = {\n    parent: {\n      domain: domain,\n      scale: scale,\n      width: width,\n      height: height,\n      data: data,\n      standalone: standalone,\n      theme: theme,\n      polar: polar,\n      origin: origin,\n      name: name,\n      style: style.parent,\n      padding: padding,\n      horizontal: horizontal\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var x = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n    var high = scale.y(datum._high);\n    var close = scale.y(datum._close);\n    var open = scale.y(datum._open);\n    var low = scale.y(datum._low);\n    var dataStyle = getDataStyles(datum, style.data, props);\n    var dataProps = {\n      x: x,\n      high: high,\n      low: low,\n      candleWidth: candleWidth,\n      candleRatio: candleRatio,\n      scale: scale,\n      data: data,\n      datum: datum,\n      groupComponent: groupComponent,\n      index: index,\n      style: dataStyle,\n      width: width,\n      polar: polar,\n      origin: origin,\n      wickStrokeWidth: wickStrokeWidth,\n      open: open,\n      close: close,\n      horizontal: horizontal,\n      labelOrientation: labelOrientation\n    };\n    dataProps.candleWidth = getCandleWidth(dataProps);\n\n    var extendedProps = _defaults(Object.assign({}, dataProps), props);\n\n    childProps[eventKey] = {\n      data: dataProps\n    };\n\n    if (labels) {\n      var text = LabelHelpers.getText(props, datum, index);\n\n      if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n        childProps[eventKey].labels = getLabelProps(extendedProps, text, style);\n      }\n    }\n\n    TYPES.forEach(function (type) {\n      var labelText = getText(extendedProps, type);\n      var labelProp = props.labels || props[\"\".concat(type, \"Labels\")];\n\n      if (labelText !== null && labelText !== undefined || labelProp && (events || sharedEvents)) {\n        var target = \"\".concat(type, \"Labels\");\n        childProps[eventKey][target] = getLabelProps(extendedProps, labelText, style, type);\n      }\n    });\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };","map":{"version":3,"sources":["/home/lucas/node_projects/dogs-final/node_modules/victory-candlestick/es/helper-methods.js"],"names":["_isPlainObject","_isFunction","_isNil","_defaults","_assign","Helpers","Scale","Domain","Data","LabelHelpers","TYPES","getData","props","accessorTypes","formatData","data","reduceData","dataset","axis","type","yDataTypes","min","max","dataType","baseCondition","Infinity","reduce","memo","datum","current","getDomainFromData","minDomain","getMinFromProps","maxDomain","getMaxFromProps","length","undefined","getDomainFromMinMax","getDomain","createDomainFunction","getLabelStyle","styleObject","namespace","component","concat","baseStyle","labels","isTooltip","tooltipTheme","theme","tooltip","style","getStyles","defaultStyles","arguments","width","height","parent","defaultParent","defaultLabels","defaultData","labelStyle","openLabels","closeLabels","lowLabels","highLabels","getCalculatedValues","polar","defaultStyle","getDefaultStyles","range","x","getRange","y","domain","scale","getBaseScale","horizontal","origin","getPolarOrigin","defaultOrientation","labelOrientation","isTransparent","attr","getDataStyles","candleColor","_open","_close","candleColors","negative","positive","fill","strokeColor","stroke","getText","index","propName","labelProp","dataName","Array","isArray","getCandleWidth","candleWidth","defaultCandleWidth","evaluateProp","extent","Math","abs","candles","candleRatio","defaultWidth","getOrientation","calculatePlotValues","positions","computedType","orientation","open","close","signX","signY","yValue","xValue","dy","padding","dx","_xValue","_yValue","_dy","_dx","getLabelProps","text","high","low","labelComponent","defaultVerticalAnchors","top","bottom","left","right","defaultTextAnchors","plotProps","_calculatePlotValues","labelProps","textAnchor","verticalAnchor","angle","omit","getBaseProps","fallbackProps","modifyProps","calculatedValues","_props","groupComponent","standalone","name","wickStrokeWidth","events","sharedEvents","initialChildProps","childProps","eventKey","_x1","_x","_high","_low","dataStyle","dataProps","extendedProps","Object","assign","forEach","labelText","target"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,sBAA3B;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,SAASC,OAAT,EAAkBC,KAAlB,EAAyBC,MAAzB,EAAiCC,IAAjC,EAAuCC,YAAvC,QAA2D,cAA3D;AACA,IAAIC,KAAK,GAAG,CAAC,OAAD,EAAU,MAAV,EAAkB,MAAlB,EAA0B,KAA1B,CAAZ;;AAEA,IAAIC,OAAO,GAAG,UAAUC,KAAV,EAAiB;AAC7B,MAAIC,aAAa,GAAG,CAAC,GAAD,EAAM,MAAN,EAAc,KAAd,EAAqB,OAArB,EAA8B,MAA9B,CAApB;AACA,SAAOL,IAAI,CAACM,UAAL,CAAgBF,KAAK,CAACG,IAAtB,EAA4BH,KAA5B,EAAmCC,aAAnC,CAAP;AACD,CAHD;;AAKA,IAAIG,UAAU,GAAG,UAAUC,OAAV,EAAmBC,IAAnB,EAAyBC,IAAzB,EAA+B;AAC9C,MAAIC,UAAU,GAAG;AACfC,IAAAA,GAAG,EAAE,MADU;AAEfC,IAAAA,GAAG,EAAE;AAFU,GAAjB;AAIA,MAAIC,QAAQ,GAAGL,IAAI,KAAK,GAAT,GAAe,IAAf,GAAsBE,UAAU,CAACD,IAAD,CAA/C;AACA,MAAIK,aAAa,GAAGL,IAAI,KAAK,KAAT,GAAiBM,QAAjB,GAA4B,CAACA,QAAjD;AACA,SAAOR,OAAO,CAACS,MAAR,CAAe,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AAC3C,QAAIC,OAAO,GAAGD,KAAK,CAACL,QAAD,CAAnB;AACA,WAAOI,IAAI,GAAGE,OAAP,IAAkBV,IAAI,KAAK,KAA3B,IAAoCQ,IAAI,GAAGE,OAAP,IAAkBV,IAAI,KAAK,KAA/D,GAAuEQ,IAAvE,GAA8EE,OAArF;AACD,GAHM,EAGJL,aAHI,CAAP;AAID,CAXD;;AAaA,IAAIM,iBAAiB,GAAG,UAAUlB,KAAV,EAAiBM,IAAjB,EAAuB;AAC7C,MAAIa,SAAS,GAAGxB,MAAM,CAACyB,eAAP,CAAuBpB,KAAvB,EAA8BM,IAA9B,CAAhB;AACA,MAAIe,SAAS,GAAG1B,MAAM,CAAC2B,eAAP,CAAuBtB,KAAvB,EAA8BM,IAA9B,CAAhB;AACA,MAAID,OAAO,GAAGN,OAAO,CAACC,KAAD,CAArB;;AAEA,MAAIK,OAAO,CAACkB,MAAR,GAAiB,CAArB,EAAwB;AACtB,WAAOJ,SAAS,KAAKK,SAAd,IAA2BH,SAAS,KAAKG,SAAzC,GAAqD7B,MAAM,CAAC8B,mBAAP,CAA2BN,SAA3B,EAAsCE,SAAtC,CAArD,GAAwGG,SAA/G;AACD;;AAED,MAAIf,GAAG,GAAGU,SAAS,KAAKK,SAAd,GAA0BL,SAA1B,GAAsCf,UAAU,CAACC,OAAD,EAAUC,IAAV,EAAgB,KAAhB,CAA1D;AACA,MAAII,GAAG,GAAGW,SAAS,KAAKG,SAAd,GAA0BH,SAA1B,GAAsCjB,UAAU,CAACC,OAAD,EAAUC,IAAV,EAAgB,KAAhB,CAA1D;AACA,SAAOX,MAAM,CAAC8B,mBAAP,CAA2BhB,GAA3B,EAAgCC,GAAhC,CAAP;AACD,CAZD;;AAcA,IAAIgB,SAAS,GAAG,UAAU1B,KAAV,EAAiBM,IAAjB,EAAuB;AACrC,SAAOX,MAAM,CAACgC,oBAAP,CAA4BT,iBAA5B,EAA+ClB,KAA/C,EAAsDM,IAAtD,CAAP;AACD,CAFD;;AAIA,IAAIsB,aAAa,GAAG,UAAU5B,KAAV,EAAiB6B,WAAjB,EAA8BC,SAA9B,EAAyC;AAC3D,MAAIC,SAAS,GAAG/B,KAAK,CAAC,GAAGgC,MAAH,CAAUF,SAAV,EAAqB,gBAArB,CAAD,CAArB;AACA,MAAIG,SAAS,GAAGJ,WAAW,CAAC,GAAGG,MAAH,CAAUF,SAAV,EAAqB,QAArB,CAAD,CAAX,IAA+CD,WAAW,CAACK,MAA3E;;AAEA,MAAI,CAACzC,OAAO,CAAC0C,SAAR,CAAkBJ,SAAlB,CAAL,EAAmC;AACjC,WAAOE,SAAP;AACD;;AAED,MAAIG,YAAY,GAAGpC,KAAK,CAACqC,KAAN,IAAerC,KAAK,CAACqC,KAAN,CAAYC,OAA3B,IAAsC,EAAzD;AACA,SAAO/C,SAAS,CAAC,EAAD,EAAK6C,YAAY,CAACG,KAAlB,EAAyBN,SAAzB,CAAhB;AACD,CAVD;;AAYA,IAAIO,SAAS,GAAG,UAAUxC,KAAV,EAAiBuC,KAAjB,EAAwB;AACtC,MAAIE,aAAa,GAAGC,SAAS,CAACnB,MAAV,GAAmB,CAAnB,IAAwBmB,SAAS,CAAC,CAAD,CAAT,KAAiBlB,SAAzC,GAAqDkB,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAxF;AACA,MAAIC,KAAK,GAAG,MAAZ;AACA,MAAIC,MAAM,GAAG,MAAb;;AAEA,MAAI,CAACL,KAAL,EAAY;AACV,WAAOhD,SAAS,CAAC;AACfsD,MAAAA,MAAM,EAAE;AACND,QAAAA,MAAM,EAAEA,MADF;AAEND,QAAAA,KAAK,EAAEA;AAFD;AADO,KAAD,EAKbF,aALa,CAAhB;AAMD;;AAED,MAAIK,aAAa,GAAGL,aAAa,CAACI,MAAd,IAAwB,EAA5C;AACA,MAAIE,aAAa,GAAGN,aAAa,CAACP,MAAd,IAAwB,EAA5C;AACA,MAAIc,WAAW,GAAGP,aAAa,CAACtC,IAAd,IAAsB,EAAxC;;AAEA,MAAI8C,UAAU,GAAG1D,SAAS,CAAC,EAAD,EAAKgD,KAAK,CAACL,MAAX,EAAmBa,aAAnB,CAA1B;;AAEA,SAAO;AACLF,IAAAA,MAAM,EAAEtD,SAAS,CAAC,EAAD,EAAKgD,KAAK,CAACM,MAAX,EAAmBC,aAAnB,EAAkC;AACjDH,MAAAA,KAAK,EAAEA,KAD0C;AAEjDC,MAAAA,MAAM,EAAEA;AAFyC,KAAlC,CADZ;AAKLV,IAAAA,MAAM,EAAEe,UALH;AAML9C,IAAAA,IAAI,EAAEZ,SAAS,CAAC,EAAD,EAAKgD,KAAK,CAACpC,IAAX,EAAiB6C,WAAjB,CANV;AAOLE,IAAAA,UAAU,EAAE3D,SAAS,CAAC,EAAD,EAAKgD,KAAK,CAACW,UAAX,EAAuBtB,aAAa,CAAC5B,KAAD,EAAQyC,aAAR,EAAuB,MAAvB,CAApC,EAAoEQ,UAApE,CAPhB;AAQLE,IAAAA,WAAW,EAAE5D,SAAS,CAAC,EAAD,EAAKgD,KAAK,CAACY,WAAX,EAAwBvB,aAAa,CAAC5B,KAAD,EAAQyC,aAAR,EAAuB,OAAvB,CAArC,EAAsEQ,UAAtE,CARjB;AASLG,IAAAA,SAAS,EAAE7D,SAAS,CAAC,EAAD,EAAKgD,KAAK,CAACa,SAAX,EAAsBxB,aAAa,CAAC5B,KAAD,EAAQyC,aAAR,EAAuB,KAAvB,CAAnC,EAAkEQ,UAAlE,CATf;AAULI,IAAAA,UAAU,EAAE9D,SAAS,CAAC,EAAD,EAAKgD,KAAK,CAACc,UAAX,EAAuBzB,aAAa,CAAC5B,KAAD,EAAQyC,aAAR,EAAuB,MAAvB,CAApC,EAAoEQ,UAApE;AAVhB,GAAP;AAYD,CAhCD;;AAkCA,IAAIK,mBAAmB,GAAG,UAAUtD,KAAV,EAAiB;AACzC,MAAIuD,KAAK,GAAGvD,KAAK,CAACuD,KAAlB;AACA,MAAIC,YAAY,GAAG/D,OAAO,CAACgE,gBAAR,CAAyBzD,KAAzB,EAAgC,aAAhC,CAAnB;AACA,MAAIuC,KAAK,GAAGC,SAAS,CAACxC,KAAD,EAAQA,KAAK,CAACuC,KAAd,EAAqBiB,YAArB,CAArB;AACA,MAAIrD,IAAI,GAAGJ,OAAO,CAACC,KAAD,CAAlB;AACA,MAAI0D,KAAK,GAAG;AACVC,IAAAA,CAAC,EAAElE,OAAO,CAACmE,QAAR,CAAiB5D,KAAjB,EAAwB,GAAxB,CADO;AAEV6D,IAAAA,CAAC,EAAEpE,OAAO,CAACmE,QAAR,CAAiB5D,KAAjB,EAAwB,GAAxB;AAFO,GAAZ;AAIA,MAAI8D,MAAM,GAAG;AACXH,IAAAA,CAAC,EAAEjC,SAAS,CAAC1B,KAAD,EAAQ,GAAR,CADD;AAEX6D,IAAAA,CAAC,EAAEnC,SAAS,CAAC1B,KAAD,EAAQ,GAAR;AAFD,GAAb;AAIA,MAAI+D,KAAK,GAAG;AACVJ,IAAAA,CAAC,EAAEjE,KAAK,CAACsE,YAAN,CAAmBhE,KAAnB,EAA0B,GAA1B,EAA+B8D,MAA/B,CAAsCA,MAAM,CAACH,CAA7C,EAAgDD,KAAhD,CAAsD1D,KAAK,CAACiE,UAAN,GAAmBP,KAAK,CAACG,CAAzB,GAA6BH,KAAK,CAACC,CAAzF,CADO;AAEVE,IAAAA,CAAC,EAAEnE,KAAK,CAACsE,YAAN,CAAmBhE,KAAnB,EAA0B,GAA1B,EAA+B8D,MAA/B,CAAsCA,MAAM,CAACD,CAA7C,EAAgDH,KAAhD,CAAsD1D,KAAK,CAACiE,UAAN,GAAmBP,KAAK,CAACC,CAAzB,GAA6BD,KAAK,CAACG,CAAzF;AAFO,GAAZ;AAIA,MAAIK,MAAM,GAAGX,KAAK,GAAGvD,KAAK,CAACkE,MAAN,IAAgBzE,OAAO,CAAC0E,cAAR,CAAuBnE,KAAvB,CAAnB,GAAmDwB,SAArE;AACA,MAAI4C,kBAAkB,GAAGpE,KAAK,CAACiE,UAAN,GAAmB,KAAnB,GAA2B,OAApD;AACA,MAAII,gBAAgB,GAAGrE,KAAK,CAACqE,gBAAN,IAA0BD,kBAAjD;AACA,SAAO;AACLN,IAAAA,MAAM,EAAEA,MADH;AAEL3D,IAAAA,IAAI,EAAEA,IAFD;AAGL4D,IAAAA,KAAK,EAAEA,KAHF;AAILxB,IAAAA,KAAK,EAAEA,KAJF;AAKL2B,IAAAA,MAAM,EAAEA,MALH;AAMLG,IAAAA,gBAAgB,EAAEA;AANb,GAAP;AAQD,CA5BD;;AA8BA,IAAIC,aAAa,GAAG,UAAUC,IAAV,EAAgB;AAClC,SAAOA,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,aAAnC;AACD,CAFD;;AAIA,IAAIC,aAAa,GAAG,UAAUxD,KAAV,EAAiBuB,KAAjB,EAAwBvC,KAAxB,EAA+B;AACjDuC,EAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AACA,MAAIkC,WAAW,GAAGzD,KAAK,CAAC0D,KAAN,GAAc1D,KAAK,CAAC2D,MAApB,GAA6B3E,KAAK,CAAC4E,YAAN,CAAmBC,QAAhD,GAA2D7E,KAAK,CAAC4E,YAAN,CAAmBE,QAAhG;AACA,MAAIC,IAAI,GAAGxC,KAAK,CAACwC,IAAN,IAAcN,WAAzB;AACA,MAAIO,WAAW,GAAGzC,KAAK,CAAC0C,MAAxB;AACA,MAAIA,MAAM,GAAGX,aAAa,CAACU,WAAD,CAAb,GAA6BD,IAA7B,GAAoCC,WAAW,IAAI,OAAhE;AACA,SAAOxF,OAAO,CAAC,EAAD,EAAK+C,KAAL,EAAY;AACxB0C,IAAAA,MAAM,EAAEA,MADgB;AAExBF,IAAAA,IAAI,EAAEA;AAFkB,GAAZ,CAAd;AAID,CAVD;;AAYA,IAAIG,OAAO,GAAG,UAAUlF,KAAV,EAAiBO,IAAjB,EAAuB;AACnC,MAAIS,KAAK,GAAGhB,KAAK,CAACgB,KAAlB;AAAA,MACImE,KAAK,GAAGnF,KAAK,CAACmF,KADlB;AAAA,MAEIjD,MAAM,GAAGlC,KAAK,CAACkC,MAFnB;AAGA,MAAIkD,QAAQ,GAAG,GAAGpD,MAAH,CAAUzB,IAAV,EAAgB,QAAhB,CAAf;AACA,MAAI8E,SAAS,GAAGrF,KAAK,CAACoF,QAAD,CAArB;;AAEA,MAAI,CAACC,SAAD,IAAc,CAACnD,MAAnB,EAA2B;AACzB,WAAO,IAAP;AACD,GAFD,MAEO,IAAImD,SAAS,KAAK,IAAd,IAAsBnD,MAAM,KAAK,IAArC,EAA2C;AAChD,QAAIoD,QAAQ,GAAG,IAAItD,MAAJ,CAAWzB,IAAX,CAAf;AACA,WAAO,GAAGyB,MAAH,CAAUhB,KAAK,CAACsE,QAAD,CAAf,CAAP;AACD;;AAED,SAAOC,KAAK,CAACC,OAAN,CAAcH,SAAd,IAA2BA,SAAS,CAACF,KAAD,CAApC,GAA8CE,SAArD;AACD,CAfD;;AAiBA,IAAII,cAAc,GAAG,UAAUzF,KAAV,EAAiBuC,KAAjB,EAAwB;AAC3C,MAAIpC,IAAI,GAAGH,KAAK,CAACG,IAAjB;AAAA,MACIuF,WAAW,GAAG1F,KAAK,CAAC0F,WADxB;AAAA,MAEI3B,KAAK,GAAG/D,KAAK,CAAC+D,KAFlB;AAAA,MAGI4B,kBAAkB,GAAG3F,KAAK,CAAC2F,kBAH/B;;AAKA,MAAID,WAAJ,EAAiB;AACf,WAAOrG,WAAW,CAACqG,WAAD,CAAX,GAA2BjG,OAAO,CAACmG,YAAR,CAAqBF,WAArB,EAAkC1F,KAAlC,CAA3B,GAAsE0F,WAA7E;AACD,GAFD,MAEO,IAAInD,KAAK,IAAIA,KAAK,CAACI,KAAnB,EAA0B;AAC/B,WAAOJ,KAAK,CAACI,KAAb;AACD;;AAED,MAAIe,KAAK,GAAGK,KAAK,CAACJ,CAAN,CAAQD,KAAR,EAAZ;AACA,MAAImC,MAAM,GAAGC,IAAI,CAACC,GAAL,CAASrC,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAzB,CAAb;AACA,MAAIsC,OAAO,GAAG7F,IAAI,CAACoB,MAAL,GAAc,CAA5B;AACA,MAAI0E,WAAW,GAAGjG,KAAK,CAACiG,WAAN,IAAqB,GAAvC;AACA,MAAIC,YAAY,GAAGD,WAAW,IAAI9F,IAAI,CAACoB,MAAL,GAAc,CAAd,GAAkBoE,kBAAlB,GAAuCE,MAAM,GAAGG,OAApD,CAA9B;AACA,SAAOF,IAAI,CAACpF,GAAL,CAAS,CAAT,EAAYwF,YAAZ,CAAP;AACD,CAlBD;;AAoBA,IAAIC,cAAc,GAAG,UAAU9B,gBAAV,EAA4B;AAC/C,MAAI9D,IAAI,GAAGmC,SAAS,CAACnB,MAAV,GAAmB,CAAnB,IAAwBmB,SAAS,CAAC,CAAD,CAAT,KAAiBlB,SAAzC,GAAqDkB,SAAS,CAAC,CAAD,CAA9D,GAAoE,QAA/E;AACA,SAAOtD,cAAc,CAACiF,gBAAD,CAAd,GAAmCA,gBAAgB,CAAC9D,IAAD,CAAnD,GAA4D8D,gBAAnE;AACD,CAHD;AAIA;;;AAGA,IAAI+B,mBAAmB,GAAG,UAAUpG,KAAV,EAAiB;AACzC,MAAIqG,SAAS,GAAGrG,KAAK,CAACqG,SAAtB;AAAA,MACIpD,UAAU,GAAGjD,KAAK,CAACiD,UADvB;AAAA,MAEIU,CAAC,GAAG3D,KAAK,CAAC2D,CAFd;AAAA,MAGIM,UAAU,GAAGjE,KAAK,CAACiE,UAHvB;AAAA,MAIIqC,YAAY,GAAGtG,KAAK,CAACsG,YAJzB;AAAA,MAKIZ,WAAW,GAAG1F,KAAK,CAAC0F,WALxB;AAAA,MAMIa,WAAW,GAAGvG,KAAK,CAACuG,WANxB;AAOAF,EAAAA,SAAS,CAACnE,MAAV,GAAmB,CAACmE,SAAS,CAACG,IAAV,GAAiBH,SAAS,CAACI,KAA5B,IAAqC,CAAxD;AACA,MAAIC,KAAK,GAAGH,WAAW,KAAK,MAAhB,GAAyB,CAAC,CAA1B,GAA8B,CAA1C;AACA,MAAII,KAAK,GAAGJ,WAAW,KAAK,KAAhB,GAAwB,CAAC,CAAzB,GAA6B,CAAzC;;AAEA,MAAItC,UAAJ,EAAgB;AACd,QAAI2C,MAAM,GAAGjD,CAAb;AACA,QAAIkD,MAAM,GAAGR,SAAS,CAACC,YAAD,CAAtB;AACA,QAAIQ,EAAE,GAAGP,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,QAAzC,GAAoDI,KAAK,IAAIjB,WAAW,GAAG,CAAlB,CAAL,GAA4BiB,KAAK,IAAI1D,UAAU,CAAC8D,OAAX,IAAsB,CAA1B,CAArF,GAAoH,CAA7H;AACA,QAAIC,EAAE,GAAGT,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,QAAzC,GAAoD,CAApD,GAAwDG,KAAK,IAAIzD,UAAU,CAAC8D,OAAX,IAAsB,CAA1B,CAAtE;AACA,WAAO;AACLH,MAAAA,MAAM,EAAEA,MADH;AAELC,MAAAA,MAAM,EAAEA,MAFH;AAGLG,MAAAA,EAAE,EAAEA,EAHC;AAILF,MAAAA,EAAE,EAAEA;AAJC,KAAP;AAMD,GAXD,MAWO;AACL,QAAIG,OAAO,GAAGtD,CAAd;AACA,QAAIuD,OAAO,GAAGb,SAAS,CAACC,YAAD,CAAvB;;AAEA,QAAIa,GAAG,GAAGZ,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,QAAzC,GAAoDI,KAAK,IAAI1D,UAAU,CAAC8D,OAAX,IAAsB,CAA1B,CAAzD,GAAwF,CAAlG;;AAEA,QAAIK,GAAG,GAAGb,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,QAAzC,GAAoD,CAApD,GAAwDG,KAAK,IAAIhB,WAAW,GAAG,CAAlB,CAAL,GAA4BgB,KAAK,IAAIzD,UAAU,CAAC8D,OAAX,IAAsB,CAA1B,CAAnG;;AAEA,WAAO;AACLH,MAAAA,MAAM,EAAEM,OADH;AAELL,MAAAA,MAAM,EAAEI,OAFH;AAGLD,MAAAA,EAAE,EAAEI,GAHC;AAILN,MAAAA,EAAE,EAAEK;AAJC,KAAP;AAMD;AACF,CAtCD;AAuCA;;AAEA;;;AAGA,IAAIE,aAAa,GAAG,UAAUrH,KAAV,EAAiBsH,IAAjB,EAAuB/E,KAAvB,EAA8BhC,IAA9B,EAAoC;AACtD,MAAIoD,CAAC,GAAG3D,KAAK,CAAC2D,CAAd;AAAA,MACI4D,IAAI,GAAGvH,KAAK,CAACuH,IADjB;AAAA,MAEIC,GAAG,GAAGxH,KAAK,CAACwH,GAFhB;AAAA,MAGIhB,IAAI,GAAGxG,KAAK,CAACwG,IAHjB;AAAA,MAIIC,KAAK,GAAGzG,KAAK,CAACyG,KAJlB;AAAA,MAKItB,KAAK,GAAGnF,KAAK,CAACmF,KALlB;AAAA,MAMIpB,KAAK,GAAG/D,KAAK,CAAC+D,KANlB;AAAA,MAOI/C,KAAK,GAAGhB,KAAK,CAACgB,KAPlB;AAAA,MAQIb,IAAI,GAAGH,KAAK,CAACG,IARjB;AAAA,MASI8D,UAAU,GAAGjE,KAAK,CAACiE,UATvB;AAAA,MAUIyB,WAAW,GAAG1F,KAAK,CAAC0F,WAVxB;AAAA,MAWIrB,gBAAgB,GAAGrE,KAAK,CAACqE,gBAX7B;AAAA,MAYIhC,KAAK,GAAGrC,KAAK,CAACqC,KAZlB;AAaA,MAAIN,SAAS,GAAG/B,KAAK,CAAC,GAAGgC,MAAH,CAAUzB,IAAV,EAAgB,gBAAhB,CAAD,CAAL,IAA4CP,KAAK,CAACyH,cAAlE;AACA,MAAIrD,kBAAkB,GAAGH,UAAU,GAAG,KAAH,GAAW,OAA9C;AACA,MAAIsC,WAAW,GAAGxE,SAAS,CAAC/B,KAAV,IAAmB+B,SAAS,CAAC/B,KAAV,CAAgBuG,WAAnC,IAAkDJ,cAAc,CAAC9B,gBAAD,EAAmB9D,IAAnB,CAAhE,IAA4F6D,kBAA9G;AACA,MAAIiC,SAAS,GAAG;AACdkB,IAAAA,IAAI,EAAEA,IADQ;AAEdC,IAAAA,GAAG,EAAEA,GAFS;AAGdhB,IAAAA,IAAI,EAAEA,IAHQ;AAIdC,IAAAA,KAAK,EAAEA;AAJO,GAAhB;AAMA,MAAI3E,SAAS,GAAGvB,IAAI,GAAG,GAAGyB,MAAH,CAAUzB,IAAV,EAAgB,QAAhB,CAAH,GAA+B,QAAnD;AACA,MAAI0C,UAAU,GAAGV,KAAK,CAACT,SAAD,CAAL,IAAoBS,KAAK,CAACL,MAA3C;AACA,MAAIwF,sBAAsB,GAAG;AAC3BC,IAAAA,GAAG,EAAE,KADsB;AAE3BC,IAAAA,MAAM,EAAE,OAFmB;AAG3BC,IAAAA,IAAI,EAAE,QAHqB;AAI3BC,IAAAA,KAAK,EAAE;AAJoB,GAA7B;AAMA,MAAIC,kBAAkB,GAAG;AACvBF,IAAAA,IAAI,EAAE,KADiB;AAEvBC,IAAAA,KAAK,EAAE,OAFgB;AAGvBH,IAAAA,GAAG,EAAE,QAHkB;AAIvBC,IAAAA,MAAM,EAAE;AAJe,GAAzB;AAMA,MAAItB,YAAY,GAAG/F,IAAI,GAAGA,IAAH,GAAU,QAAjC;AACA,MAAIyH,SAAS,GAAG;AACd3B,IAAAA,SAAS,EAAEA,SADG;AAEdpD,IAAAA,UAAU,EAAEA,UAFE;AAGdU,IAAAA,CAAC,EAAEA,CAHW;AAIdM,IAAAA,UAAU,EAAEA,UAJE;AAKdqC,IAAAA,YAAY,EAAEA,YALA;AAMdZ,IAAAA,WAAW,EAAEA,WANC;AAOda,IAAAA,WAAW,EAAEA;AAPC,GAAhB;;AAUA,MAAI0B,oBAAoB,GAAG7B,mBAAmB,CAAC4B,SAAD,CAA9C;AAAA,MACIpB,MAAM,GAAGqB,oBAAoB,CAACrB,MADlC;AAAA,MAEIC,MAAM,GAAGoB,oBAAoB,CAACpB,MAFlC;AAAA,MAGIG,EAAE,GAAGiB,oBAAoB,CAACjB,EAH9B;AAAA,MAIIF,EAAE,GAAGmB,oBAAoB,CAACnB,EAJ9B;;AAMA,MAAIoB,UAAU,GAAG;AACf3F,IAAAA,KAAK,EAAEU,UADQ;AAEfY,IAAAA,CAAC,EAAE+C,MAFY;AAGfjD,IAAAA,CAAC,EAAEkD,MAHY;AAIfG,IAAAA,EAAE,EAAEA,EAJW;AAKfF,IAAAA,EAAE,EAAEA,EALW;AAMfQ,IAAAA,IAAI,EAAEA,IANS;AAOfnC,IAAAA,KAAK,EAAEA,KAPQ;AAQfpB,IAAAA,KAAK,EAAEA,KARQ;AASf/C,IAAAA,KAAK,EAAEA,KATQ;AAUfb,IAAAA,IAAI,EAAEA,IAVS;AAWfoG,IAAAA,WAAW,EAAEA,WAXE;AAYf4B,IAAAA,UAAU,EAAElF,UAAU,CAACkF,UAAX,IAAyBJ,kBAAkB,CAACxB,WAAD,CAZxC;AAaf6B,IAAAA,cAAc,EAAEnF,UAAU,CAACmF,cAAX,IAA6BV,sBAAsB,CAACnB,WAAD,CAbpD;AAcf8B,IAAAA,KAAK,EAAEpF,UAAU,CAACoF,KAdH;AAefpE,IAAAA,UAAU,EAAEA;AAfG,GAAjB;;AAkBA,MAAI,CAACxE,OAAO,CAAC0C,SAAR,CAAkBJ,SAAlB,CAAL,EAAmC;AACjC,WAAOmG,UAAP;AACD;;AAED,MAAI9F,YAAY,GAAGC,KAAK,IAAIA,KAAK,CAACC,OAAf,IAA0B,EAA7C;AACA,SAAO/C,SAAS,CAAC,EAAD,EAAK2I,UAAL,EAAiBzI,OAAO,CAAC6I,IAAR,CAAalG,YAAb,EAA2B,CAAC,OAAD,CAA3B,CAAjB,CAAhB;AACD,CA9ED;AA+EA;;;AAGA,IAAImG,YAAY,GAAG,UAAUvI,KAAV,EAAiBwI,aAAjB,EAAgC;AACjD;AACAxI,EAAAA,KAAK,GAAGP,OAAO,CAACgJ,WAAR,CAAoBzI,KAApB,EAA2BwI,aAA3B,EAA0C,aAA1C,CAAR;AACA,MAAIE,gBAAgB,GAAGpF,mBAAmB,CAACtD,KAAD,CAA1C;AACA,MAAIG,IAAI,GAAGuI,gBAAgB,CAACvI,IAA5B;AAAA,MACIoC,KAAK,GAAGmG,gBAAgB,CAACnG,KAD7B;AAAA,MAEIwB,KAAK,GAAG2E,gBAAgB,CAAC3E,KAF7B;AAAA,MAGID,MAAM,GAAG4E,gBAAgB,CAAC5E,MAH9B;AAAA,MAIII,MAAM,GAAGwE,gBAAgB,CAACxE,MAJ9B;AAAA,MAKIG,gBAAgB,GAAGqE,gBAAgB,CAACrE,gBALxC;AAMA,MAAIsE,MAAM,GAAG3I,KAAb;AAAA,MACI4I,cAAc,GAAGD,MAAM,CAACC,cAD5B;AAAA,MAEIjG,KAAK,GAAGgG,MAAM,CAAChG,KAFnB;AAAA,MAGIC,MAAM,GAAG+F,MAAM,CAAC/F,MAHpB;AAAA,MAIImE,OAAO,GAAG4B,MAAM,CAAC5B,OAJrB;AAAA,MAKI8B,UAAU,GAAGF,MAAM,CAACE,UALxB;AAAA,MAMIC,IAAI,GAAGH,MAAM,CAACG,IANlB;AAAA,MAOIpD,WAAW,GAAGiD,MAAM,CAACjD,WAPzB;AAAA,MAQIO,WAAW,GAAG0C,MAAM,CAAC1C,WARzB;AAAA,MASI5D,KAAK,GAAGsG,MAAM,CAACtG,KATnB;AAAA,MAUIkB,KAAK,GAAGoF,MAAM,CAACpF,KAVnB;AAAA,MAWIwF,eAAe,GAAGJ,MAAM,CAACI,eAX7B;AAAA,MAYI7G,MAAM,GAAGyG,MAAM,CAACzG,MAZpB;AAAA,MAaI8G,MAAM,GAAGL,MAAM,CAACK,MAbpB;AAAA,MAcIC,YAAY,GAAGN,MAAM,CAACM,YAd1B;AAAA,MAeIhF,UAAU,GAAG0E,MAAM,CAAC1E,UAfxB;AAgBA,MAAIiF,iBAAiB,GAAG;AACtBrG,IAAAA,MAAM,EAAE;AACNiB,MAAAA,MAAM,EAAEA,MADF;AAENC,MAAAA,KAAK,EAAEA,KAFD;AAGNpB,MAAAA,KAAK,EAAEA,KAHD;AAINC,MAAAA,MAAM,EAAEA,MAJF;AAKNzC,MAAAA,IAAI,EAAEA,IALA;AAMN0I,MAAAA,UAAU,EAAEA,UANN;AAONxG,MAAAA,KAAK,EAAEA,KAPD;AAQNkB,MAAAA,KAAK,EAAEA,KARD;AASNW,MAAAA,MAAM,EAAEA,MATF;AAUN4E,MAAAA,IAAI,EAAEA,IAVA;AAWNvG,MAAAA,KAAK,EAAEA,KAAK,CAACM,MAXP;AAYNkE,MAAAA,OAAO,EAAEA,OAZH;AAaN9C,MAAAA,UAAU,EAAEA;AAbN;AADc,GAAxB;AAiBA,SAAO9D,IAAI,CAACW,MAAL,CAAY,UAAUqI,UAAV,EAAsBnI,KAAtB,EAA6BmE,KAA7B,EAAoC;AACrD,QAAIiE,QAAQ,GAAG,CAAC9J,MAAM,CAAC0B,KAAK,CAACoI,QAAP,CAAP,GAA0BpI,KAAK,CAACoI,QAAhC,GAA2CjE,KAA1D;AACA,QAAIxB,CAAC,GAAGI,KAAK,CAACJ,CAAN,CAAQ3C,KAAK,CAACqI,GAAN,KAAc7H,SAAd,GAA0BR,KAAK,CAACqI,GAAhC,GAAsCrI,KAAK,CAACsI,EAApD,CAAR;AACA,QAAI/B,IAAI,GAAGxD,KAAK,CAACF,CAAN,CAAQ7C,KAAK,CAACuI,KAAd,CAAX;AACA,QAAI9C,KAAK,GAAG1C,KAAK,CAACF,CAAN,CAAQ7C,KAAK,CAAC2D,MAAd,CAAZ;AACA,QAAI6B,IAAI,GAAGzC,KAAK,CAACF,CAAN,CAAQ7C,KAAK,CAAC0D,KAAd,CAAX;AACA,QAAI8C,GAAG,GAAGzD,KAAK,CAACF,CAAN,CAAQ7C,KAAK,CAACwI,IAAd,CAAV;AACA,QAAIC,SAAS,GAAGjF,aAAa,CAACxD,KAAD,EAAQuB,KAAK,CAACpC,IAAd,EAAoBH,KAApB,CAA7B;AACA,QAAI0J,SAAS,GAAG;AACd/F,MAAAA,CAAC,EAAEA,CADW;AAEd4D,MAAAA,IAAI,EAAEA,IAFQ;AAGdC,MAAAA,GAAG,EAAEA,GAHS;AAId9B,MAAAA,WAAW,EAAEA,WAJC;AAKdO,MAAAA,WAAW,EAAEA,WALC;AAMdlC,MAAAA,KAAK,EAAEA,KANO;AAOd5D,MAAAA,IAAI,EAAEA,IAPQ;AAQda,MAAAA,KAAK,EAAEA,KARO;AASd4H,MAAAA,cAAc,EAAEA,cATF;AAUdzD,MAAAA,KAAK,EAAEA,KAVO;AAWd5C,MAAAA,KAAK,EAAEkH,SAXO;AAYd9G,MAAAA,KAAK,EAAEA,KAZO;AAadY,MAAAA,KAAK,EAAEA,KAbO;AAcdW,MAAAA,MAAM,EAAEA,MAdM;AAed6E,MAAAA,eAAe,EAAEA,eAfH;AAgBdvC,MAAAA,IAAI,EAAEA,IAhBQ;AAiBdC,MAAAA,KAAK,EAAEA,KAjBO;AAkBdxC,MAAAA,UAAU,EAAEA,UAlBE;AAmBdI,MAAAA,gBAAgB,EAAEA;AAnBJ,KAAhB;AAqBAqF,IAAAA,SAAS,CAAChE,WAAV,GAAwBD,cAAc,CAACiE,SAAD,CAAtC;;AAEA,QAAIC,aAAa,GAAGpK,SAAS,CAACqK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,SAAlB,CAAD,EAA+B1J,KAA/B,CAA7B;;AAEAmJ,IAAAA,UAAU,CAACC,QAAD,CAAV,GAAuB;AACrBjJ,MAAAA,IAAI,EAAEuJ;AADe,KAAvB;;AAIA,QAAIxH,MAAJ,EAAY;AACV,UAAIoF,IAAI,GAAGzH,YAAY,CAACqF,OAAb,CAAqBlF,KAArB,EAA4BgB,KAA5B,EAAmCmE,KAAnC,CAAX;;AAEA,UAAImC,IAAI,KAAK9F,SAAT,IAAsB8F,IAAI,KAAK,IAA/B,IAAuCpF,MAAM,KAAK8G,MAAM,IAAIC,YAAf,CAAjD,EAA+E;AAC7EE,QAAAA,UAAU,CAACC,QAAD,CAAV,CAAqBlH,MAArB,GAA8BmF,aAAa,CAACsC,aAAD,EAAgBrC,IAAhB,EAAsB/E,KAAtB,CAA3C;AACD;AACF;;AAEDzC,IAAAA,KAAK,CAACgK,OAAN,CAAc,UAAUvJ,IAAV,EAAgB;AAC5B,UAAIwJ,SAAS,GAAG7E,OAAO,CAACyE,aAAD,EAAgBpJ,IAAhB,CAAvB;AACA,UAAI8E,SAAS,GAAGrF,KAAK,CAACkC,MAAN,IAAgBlC,KAAK,CAAC,GAAGgC,MAAH,CAAUzB,IAAV,EAAgB,QAAhB,CAAD,CAArC;;AAEA,UAAIwJ,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAKvI,SAApC,IAAiD6D,SAAS,KAAK2D,MAAM,IAAIC,YAAf,CAA9D,EAA4F;AAC1F,YAAIe,MAAM,GAAG,GAAGhI,MAAH,CAAUzB,IAAV,EAAgB,QAAhB,CAAb;AACA4I,QAAAA,UAAU,CAACC,QAAD,CAAV,CAAqBY,MAArB,IAA+B3C,aAAa,CAACsC,aAAD,EAAgBI,SAAhB,EAA2BxH,KAA3B,EAAkChC,IAAlC,CAA5C;AACD;AACF,KARD;AASA,WAAO4I,UAAP;AACD,GAvDM,EAuDJD,iBAvDI,CAAP;AAwDD,CAnGD;;AAqGA,SAASX,YAAT,EAAuB7G,SAAvB,EAAkC3B,OAAlC","sourcesContent":["import _isPlainObject from \"lodash/isPlainObject\";\nimport _isFunction from \"lodash/isFunction\";\nimport _isNil from \"lodash/isNil\";\nimport _defaults from \"lodash/defaults\";\nimport _assign from \"lodash/assign\";\nimport { Helpers, Scale, Domain, Data, LabelHelpers } from \"victory-core\";\nvar TYPES = [\"close\", \"open\", \"high\", \"low\"];\n\nvar getData = function (props) {\n  var accessorTypes = [\"x\", \"high\", \"low\", \"close\", \"open\"];\n  return Data.formatData(props.data, props, accessorTypes);\n};\n\nvar reduceData = function (dataset, axis, type) {\n  var yDataTypes = {\n    min: \"_low\",\n    max: \"_high\"\n  };\n  var dataType = axis === \"x\" ? \"_x\" : yDataTypes[type];\n  var baseCondition = type === \"min\" ? Infinity : -Infinity;\n  return dataset.reduce(function (memo, datum) {\n    var current = datum[dataType];\n    return memo < current && type === \"min\" || memo > current && type === \"max\" ? memo : current;\n  }, baseCondition);\n};\n\nvar getDomainFromData = function (props, axis) {\n  var minDomain = Domain.getMinFromProps(props, axis);\n  var maxDomain = Domain.getMaxFromProps(props, axis);\n  var dataset = getData(props);\n\n  if (dataset.length < 1) {\n    return minDomain !== undefined && maxDomain !== undefined ? Domain.getDomainFromMinMax(minDomain, maxDomain) : undefined;\n  }\n\n  var min = minDomain !== undefined ? minDomain : reduceData(dataset, axis, \"min\");\n  var max = maxDomain !== undefined ? maxDomain : reduceData(dataset, axis, \"max\");\n  return Domain.getDomainFromMinMax(min, max);\n};\n\nvar getDomain = function (props, axis) {\n  return Domain.createDomainFunction(getDomainFromData)(props, axis);\n};\n\nvar getLabelStyle = function (props, styleObject, namespace) {\n  var component = props[\"\".concat(namespace, \"LabelComponent\")];\n  var baseStyle = styleObject[\"\".concat(namespace, \"Labels\")] || styleObject.labels;\n\n  if (!Helpers.isTooltip(component)) {\n    return baseStyle;\n  }\n\n  var tooltipTheme = props.theme && props.theme.tooltip || {};\n  return _defaults({}, tooltipTheme.style, baseStyle);\n};\n\nvar getStyles = function (props, style) {\n  var defaultStyles = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var width = \"100%\";\n  var height = \"100%\";\n\n  if (!style) {\n    return _defaults({\n      parent: {\n        height: height,\n        width: width\n      }\n    }, defaultStyles);\n  }\n\n  var defaultParent = defaultStyles.parent || {};\n  var defaultLabels = defaultStyles.labels || {};\n  var defaultData = defaultStyles.data || {};\n\n  var labelStyle = _defaults({}, style.labels, defaultLabels);\n\n  return {\n    parent: _defaults({}, style.parent, defaultParent, {\n      width: width,\n      height: height\n    }),\n    labels: labelStyle,\n    data: _defaults({}, style.data, defaultData),\n    openLabels: _defaults({}, style.openLabels, getLabelStyle(props, defaultStyles, \"open\"), labelStyle),\n    closeLabels: _defaults({}, style.closeLabels, getLabelStyle(props, defaultStyles, \"close\"), labelStyle),\n    lowLabels: _defaults({}, style.lowLabels, getLabelStyle(props, defaultStyles, \"low\"), labelStyle),\n    highLabels: _defaults({}, style.highLabels, getLabelStyle(props, defaultStyles, \"high\"), labelStyle)\n  };\n};\n\nvar getCalculatedValues = function (props) {\n  var polar = props.polar;\n  var defaultStyle = Helpers.getDefaultStyles(props, \"candlestick\");\n  var style = getStyles(props, props.style, defaultStyle);\n  var data = getData(props);\n  var range = {\n    x: Helpers.getRange(props, \"x\"),\n    y: Helpers.getRange(props, \"y\")\n  };\n  var domain = {\n    x: getDomain(props, \"x\"),\n    y: getDomain(props, \"y\")\n  };\n  var scale = {\n    x: Scale.getBaseScale(props, \"x\").domain(domain.x).range(props.horizontal ? range.y : range.x),\n    y: Scale.getBaseScale(props, \"y\").domain(domain.y).range(props.horizontal ? range.x : range.y)\n  };\n  var origin = polar ? props.origin || Helpers.getPolarOrigin(props) : undefined;\n  var defaultOrientation = props.horizontal ? \"top\" : \"right\";\n  var labelOrientation = props.labelOrientation || defaultOrientation;\n  return {\n    domain: domain,\n    data: data,\n    scale: scale,\n    style: style,\n    origin: origin,\n    labelOrientation: labelOrientation\n  };\n};\n\nvar isTransparent = function (attr) {\n  return attr === \"none\" || attr === \"transparent\";\n};\n\nvar getDataStyles = function (datum, style, props) {\n  style = style || {};\n  var candleColor = datum._open > datum._close ? props.candleColors.negative : props.candleColors.positive;\n  var fill = style.fill || candleColor;\n  var strokeColor = style.stroke;\n  var stroke = isTransparent(strokeColor) ? fill : strokeColor || \"black\";\n  return _assign({}, style, {\n    stroke: stroke,\n    fill: fill\n  });\n};\n\nvar getText = function (props, type) {\n  var datum = props.datum,\n      index = props.index,\n      labels = props.labels;\n  var propName = \"\".concat(type, \"Labels\");\n  var labelProp = props[propName];\n\n  if (!labelProp && !labels) {\n    return null;\n  } else if (labelProp === true || labels === true) {\n    var dataName = \"_\".concat(type);\n    return \"\".concat(datum[dataName]);\n  }\n\n  return Array.isArray(labelProp) ? labelProp[index] : labelProp;\n};\n\nvar getCandleWidth = function (props, style) {\n  var data = props.data,\n      candleWidth = props.candleWidth,\n      scale = props.scale,\n      defaultCandleWidth = props.defaultCandleWidth;\n\n  if (candleWidth) {\n    return _isFunction(candleWidth) ? Helpers.evaluateProp(candleWidth, props) : candleWidth;\n  } else if (style && style.width) {\n    return style.width;\n  }\n\n  var range = scale.x.range();\n  var extent = Math.abs(range[1] - range[0]);\n  var candles = data.length + 2;\n  var candleRatio = props.candleRatio || 0.5;\n  var defaultWidth = candleRatio * (data.length < 2 ? defaultCandleWidth : extent / candles);\n  return Math.max(1, defaultWidth);\n};\n\nvar getOrientation = function (labelOrientation) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"labels\";\n  return _isPlainObject(labelOrientation) ? labelOrientation[type] : labelOrientation;\n};\n/* eslint-disable complexity*/\n\n\nvar calculatePlotValues = function (props) {\n  var positions = props.positions,\n      labelStyle = props.labelStyle,\n      x = props.x,\n      horizontal = props.horizontal,\n      computedType = props.computedType,\n      candleWidth = props.candleWidth,\n      orientation = props.orientation;\n  positions.labels = (positions.open + positions.close) / 2;\n  var signX = orientation === \"left\" ? -1 : 1;\n  var signY = orientation === \"top\" ? -1 : 1;\n\n  if (horizontal) {\n    var yValue = x;\n    var xValue = positions[computedType];\n    var dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (candleWidth / 2) + signY * (labelStyle.padding || 0) : 0;\n    var dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (labelStyle.padding || 1);\n    return {\n      yValue: yValue,\n      xValue: xValue,\n      dx: dx,\n      dy: dy\n    };\n  } else {\n    var _xValue = x;\n    var _yValue = positions[computedType];\n\n    var _dy = orientation === \"top\" || orientation === \"bottom\" ? signY * (labelStyle.padding || 1) : 0;\n\n    var _dx = orientation === \"top\" || orientation === \"bottom\" ? 0 : signX * (candleWidth / 2) + signX * (labelStyle.padding || 0);\n\n    return {\n      yValue: _yValue,\n      xValue: _xValue,\n      dx: _dx,\n      dy: _dy\n    };\n  }\n};\n/* eslint-enable complexity*/\n\n/* eslint-disable max-params*/\n\n\nvar getLabelProps = function (props, text, style, type) {\n  var x = props.x,\n      high = props.high,\n      low = props.low,\n      open = props.open,\n      close = props.close,\n      index = props.index,\n      scale = props.scale,\n      datum = props.datum,\n      data = props.data,\n      horizontal = props.horizontal,\n      candleWidth = props.candleWidth,\n      labelOrientation = props.labelOrientation,\n      theme = props.theme;\n  var component = props[\"\".concat(type, \"LabelComponent\")] || props.labelComponent;\n  var defaultOrientation = horizontal ? \"top\" : \"right\";\n  var orientation = component.props && component.props.orientation || getOrientation(labelOrientation, type) || defaultOrientation;\n  var positions = {\n    high: high,\n    low: low,\n    open: open,\n    close: close\n  };\n  var namespace = type ? \"\".concat(type, \"Labels\") : \"labels\";\n  var labelStyle = style[namespace] || style.labels;\n  var defaultVerticalAnchors = {\n    top: \"end\",\n    bottom: \"start\",\n    left: \"middle\",\n    right: \"middle\"\n  };\n  var defaultTextAnchors = {\n    left: \"end\",\n    right: \"start\",\n    top: \"middle\",\n    bottom: \"middle\"\n  };\n  var computedType = type ? type : \"labels\";\n  var plotProps = {\n    positions: positions,\n    labelStyle: labelStyle,\n    x: x,\n    horizontal: horizontal,\n    computedType: computedType,\n    candleWidth: candleWidth,\n    orientation: orientation\n  };\n\n  var _calculatePlotValues = calculatePlotValues(plotProps),\n      yValue = _calculatePlotValues.yValue,\n      xValue = _calculatePlotValues.xValue,\n      dx = _calculatePlotValues.dx,\n      dy = _calculatePlotValues.dy;\n\n  var labelProps = {\n    style: labelStyle,\n    y: yValue,\n    x: xValue,\n    dx: dx,\n    dy: dy,\n    text: text,\n    index: index,\n    scale: scale,\n    datum: datum,\n    data: data,\n    orientation: orientation,\n    textAnchor: labelStyle.textAnchor || defaultTextAnchors[orientation],\n    verticalAnchor: labelStyle.verticalAnchor || defaultVerticalAnchors[orientation],\n    angle: labelStyle.angle,\n    horizontal: horizontal\n  };\n\n  if (!Helpers.isTooltip(component)) {\n    return labelProps;\n  }\n\n  var tooltipTheme = theme && theme.tooltip || {};\n  return _defaults({}, labelProps, Helpers.omit(tooltipTheme, [\"style\"]));\n};\n/* eslint-enable max-params*/\n\n\nvar getBaseProps = function (props, fallbackProps) {\n  // eslint-disable-line max-statements\n  props = Helpers.modifyProps(props, fallbackProps, \"candlestick\");\n  var calculatedValues = getCalculatedValues(props);\n  var data = calculatedValues.data,\n      style = calculatedValues.style,\n      scale = calculatedValues.scale,\n      domain = calculatedValues.domain,\n      origin = calculatedValues.origin,\n      labelOrientation = calculatedValues.labelOrientation;\n  var _props = props,\n      groupComponent = _props.groupComponent,\n      width = _props.width,\n      height = _props.height,\n      padding = _props.padding,\n      standalone = _props.standalone,\n      name = _props.name,\n      candleWidth = _props.candleWidth,\n      candleRatio = _props.candleRatio,\n      theme = _props.theme,\n      polar = _props.polar,\n      wickStrokeWidth = _props.wickStrokeWidth,\n      labels = _props.labels,\n      events = _props.events,\n      sharedEvents = _props.sharedEvents,\n      horizontal = _props.horizontal;\n  var initialChildProps = {\n    parent: {\n      domain: domain,\n      scale: scale,\n      width: width,\n      height: height,\n      data: data,\n      standalone: standalone,\n      theme: theme,\n      polar: polar,\n      origin: origin,\n      name: name,\n      style: style.parent,\n      padding: padding,\n      horizontal: horizontal\n    }\n  };\n  return data.reduce(function (childProps, datum, index) {\n    var eventKey = !_isNil(datum.eventKey) ? datum.eventKey : index;\n    var x = scale.x(datum._x1 !== undefined ? datum._x1 : datum._x);\n    var high = scale.y(datum._high);\n    var close = scale.y(datum._close);\n    var open = scale.y(datum._open);\n    var low = scale.y(datum._low);\n    var dataStyle = getDataStyles(datum, style.data, props);\n    var dataProps = {\n      x: x,\n      high: high,\n      low: low,\n      candleWidth: candleWidth,\n      candleRatio: candleRatio,\n      scale: scale,\n      data: data,\n      datum: datum,\n      groupComponent: groupComponent,\n      index: index,\n      style: dataStyle,\n      width: width,\n      polar: polar,\n      origin: origin,\n      wickStrokeWidth: wickStrokeWidth,\n      open: open,\n      close: close,\n      horizontal: horizontal,\n      labelOrientation: labelOrientation\n    };\n    dataProps.candleWidth = getCandleWidth(dataProps);\n\n    var extendedProps = _defaults(Object.assign({}, dataProps), props);\n\n    childProps[eventKey] = {\n      data: dataProps\n    };\n\n    if (labels) {\n      var text = LabelHelpers.getText(props, datum, index);\n\n      if (text !== undefined && text !== null || labels && (events || sharedEvents)) {\n        childProps[eventKey].labels = getLabelProps(extendedProps, text, style);\n      }\n    }\n\n    TYPES.forEach(function (type) {\n      var labelText = getText(extendedProps, type);\n      var labelProp = props.labels || props[\"\".concat(type, \"Labels\")];\n\n      if (labelText !== null && labelText !== undefined || labelProp && (events || sharedEvents)) {\n        var target = \"\".concat(type, \"Labels\");\n        childProps[eventKey][target] = getLabelProps(extendedProps, labelText, style, type);\n      }\n    });\n    return childProps;\n  }, initialChildProps);\n};\n\nexport { getBaseProps, getDomain, getData };"]},"metadata":{},"sourceType":"module"}